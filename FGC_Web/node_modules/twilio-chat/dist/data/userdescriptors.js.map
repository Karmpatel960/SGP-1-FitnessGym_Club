{"version":3,"file":"userdescriptors.js","sources":["../../src/data/userdescriptors.ts"],"sourcesContent":["import { UriBuilder } from '../util/index';\nimport { RestPaginator } from '../restpaginator';\nimport { UserDescriptor } from '../userdescriptor';\nimport { Users } from './users';\nimport { Network } from '../services/network';\nimport { Configuration } from '../configuration';\n\nexport interface UserDescriptorsServices {\n  users: Users;\n  network: Network;\n}\n\nclass UserDescriptors {\n  constructor(\n    private readonly configuration: Configuration,\n    private readonly services: UserDescriptorsServices,\n  ) {\n  }\n\n  public async getUserDescriptor(identity: string): Promise<UserDescriptor> {\n    const url = new UriBuilder(this.configuration.links.users).path(identity).build();\n    const response = await this.services.network.get(url);\n    return new UserDescriptor(this.services, response.body);\n  }\n\n  public async getChannelUserDescriptors(channelSid: string, args: any = {}): Promise<RestPaginator<UserDescriptor>> {\n    const url = new UriBuilder(this.configuration.links.users)\n      .arg('ConversationSid', channelSid).arg('PageToken', args.pageToken)\n      .build();\n    const response = await this.services.network.get(url);\n    return new RestPaginator<UserDescriptor>(response.body.users.map(x => new UserDescriptor(this.services, x))\n      , pageToken => this.getChannelUserDescriptors(channelSid, { pageToken })\n      , response.body.meta.prev_token\n      , response.body.meta.next_token);\n  }\n}\n\nexport { UserDescriptors };\n"],"names":["UriBuilder","UserDescriptor","RestPaginator"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,MAAM,eAAe;IACnB,YACmB,aAA4B,EAC5B,QAAiC;QADjC,kBAAa,GAAb,aAAa,CAAe;QAC5B,aAAQ,GAAR,QAAQ,CAAyB;KAEnD;IAEM,MAAM,iBAAiB,CAAC,QAAgB;QAC7C,MAAM,GAAG,GAAG,IAAIA,gBAAU,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;QAClF,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACtD,OAAO,IAAIC,6BAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;KACzD;IAEM,MAAM,yBAAyB,CAAC,UAAkB,EAAE,OAAY,EAAE;QACvE,MAAM,GAAG,GAAG,IAAID,gBAAU,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC;aACvD,GAAG,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;aACnE,KAAK,EAAE,CAAC;QACX,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACtD,OAAO,IAAIE,2BAAa,CAAiB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,IAAID,6BAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,EACvG,SAAS,IAAI,IAAI,CAAC,yBAAyB,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,CAAC,EACtE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAC7B,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACpC;;;;;"}