{"version":3,"file":"publicchannels.js","sources":["../../src/data/publicchannels.ts"],"sourcesContent":["import { UriBuilder } from '../util/index';\nimport { RestPaginator } from '../restpaginator';\nimport { ChannelDescriptor } from '../channeldescriptor';\nimport { Network } from '../services/network';\nimport { Client } from '../client';\n\nexport interface PublicChannelServices {\n  network: Network;\n}\n\n/**\n * Public channels collection\n * It's a cassandra-backed pull-based collection\n */\nclass PublicChannels {\n  private client: Client;\n  private services: PublicChannelServices;\n  private url: string;\n\n  constructor(client: Client, services: PublicChannelServices, url: string) {\n    this.client = client;\n    this.services = services;\n    this.url = url;\n  }\n\n  public async getChannels(args: any = {}): Promise<RestPaginator<ChannelDescriptor>> {\n    const url = new UriBuilder(this.url).arg('PageToken', args.pageToken).build();\n    let response = await this.services.network.get(url);\n    return new RestPaginator<ChannelDescriptor>(response.body.conversations.map(x => new ChannelDescriptor(this.client, x))\n      , pageToken => this.getChannels({ pageToken })\n      , response.body.meta.previous_token\n      , response.body.meta.next_token);\n  }\n\n  public async getChannelBySid(sid: string): Promise<ChannelDescriptor> {\n    const url = new UriBuilder(this.url).path(sid).build();\n    let response = await this.services.network.get(url);\n    return new ChannelDescriptor(this.client, response.body);\n  }\n\n  public async getChannelByUniqueName(uniqueName: string): Promise<ChannelDescriptor> {\n    const url = new UriBuilder(this.url).path(uniqueName).build();\n    let response = await this.services.network.get(url);\n    return new ChannelDescriptor(this.client, response.body);\n  }\n}\n\nexport { PublicChannels };\n"],"names":["UriBuilder","RestPaginator","ChannelDescriptor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;;;;AAIA,MAAM,cAAc;IAKlB,YAAY,MAAc,EAAE,QAA+B,EAAE,GAAW;QACtE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;KAChB;IAEM,MAAM,WAAW,CAAC,OAAY,EAAE;QACrC,MAAM,GAAG,GAAG,IAAIA,gBAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,CAAC;QAC9E,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpD,OAAO,IAAIC,2BAAa,CAAoB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,IAAIC,mCAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EACnH,SAAS,IAAI,IAAI,CAAC,WAAW,CAAC,EAAE,SAAS,EAAE,CAAC,EAC5C,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EACjC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACpC;IAEM,MAAM,eAAe,CAAC,GAAW;QACtC,MAAM,GAAG,GAAG,IAAIF,gBAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;QACvD,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpD,OAAO,IAAIE,mCAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;KAC1D;IAEM,MAAM,sBAAsB,CAAC,UAAkB;QACpD,MAAM,GAAG,GAAG,IAAIF,gBAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,KAAK,EAAE,CAAC;QAC9D,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpD,OAAO,IAAIE,mCAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;KAC1D;;;;;"}