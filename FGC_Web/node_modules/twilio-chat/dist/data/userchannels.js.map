{"version":3,"file":"userchannels.js","sources":["../../src/data/userchannels.ts"],"sourcesContent":["import { UriBuilder } from '../util/index';\nimport { RestPaginator } from '../restpaginator';\nimport { ChannelDescriptor } from '../channeldescriptor';\nimport { Network } from '../services/network';\nimport { Client } from '../client';\n\nexport interface UserChannelServices {\n  network: Network;\n}\n\n/**\n * Users channels collection\n * It's a cassandra-backed pull-based collection\n */\nclass UserChannels {\n  private client: Client;\n  private services: UserChannelServices;\n  private url: string;\n\n  constructor(client: Client, services: UserChannelServices, url: string) {\n    this.client = client;\n    this.services = services;\n    this.url = url;\n  }\n\n  public async getChannels(args: any = {}): Promise<RestPaginator<ChannelDescriptor>> {\n    const url = new UriBuilder(this.url).arg('PageToken', args.pageToken).build();\n    let response = await this.services.network.get(url);\n    return new RestPaginator<ChannelDescriptor>(response.body.conversations.map(x => new ChannelDescriptor(this.client, x))\n      , pageToken => this.getChannels({ pageToken })\n      , response.body.meta.previous_token\n      , response.body.meta.next_token);\n  }\n}\n\nexport { UserChannels };\n"],"names":["UriBuilder","RestPaginator","ChannelDescriptor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;;;;AAIA,MAAM,YAAY;IAKhB,YAAY,MAAc,EAAE,QAA6B,EAAE,GAAW;QACpE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;KAChB;IAEM,MAAM,WAAW,CAAC,OAAY,EAAE;QACrC,MAAM,GAAG,GAAG,IAAIA,gBAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,CAAC;QAC9E,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpD,OAAO,IAAIC,2BAAa,CAAoB,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,IAAIC,mCAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EACnH,SAAS,IAAI,IAAI,CAAC,WAAW,CAAC,EAAE,SAAS,EAAE,CAAC,EAC5C,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EACjC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACpC;;;;;"}