/*
@license
The MIT License (MIT)

Copyright (c) 2016 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/
this.Twilio=this.Twilio||{},this.Twilio.Notifications=function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i={},a=function(t){try{return!!t()}catch(t){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={},u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,l=f&&!u.call({1:2},1);c.f=l?function(t){var e=f(this,t);return!!e&&e.enumerable}:u;var d,p,h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,y=function(t){return v.call(t).slice(8,-1)},g=y,m="".split,b=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?m.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=b,k=w,S=function(t){return x(k(t))},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=o,O=function(t){return"function"==typeof t?t:void 0},_=function(t,e){return arguments.length<2?O(E[t]):E[t]&&E[t][e]},A=_("navigator","userAgent")||"",R=o,C=A,I=R.process,P=R.Deno,j=I&&I.versions||P&&P.version,L=j&&j.v8;L?p=(d=L.split("."))[0]<4?1:d[0]+d[1]:C&&(!(d=C.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=C.match(/Chrome\/(\d+)/))&&(p=d[1]);var M=p&&+p,N=M,D=a,B=!!Object.getOwnPropertySymbols&&!D((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),F=B&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,U=_,W=F?function(t){return"symbol"==typeof t}:function(t){var e=U("Symbol");return"function"==typeof e&&Object(t)instanceof e},z=T,G={exports:{}},$=o,V=function(t,e){try{Object.defineProperty($,t,{value:e,configurable:!0,writable:!0})}catch(n){$[t]=e}return e},K=V,q="__core-js_shared__",Y=o[q]||K(q,{}),X=Y;(G.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var J=w,H=function(t){return Object(J(t))},Z=H,Q={}.hasOwnProperty,tt=Object.hasOwn||function(t,e){return Q.call(Z(t),e)},et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},ot=o,it=G.exports,at=tt,st=rt,ct=B,ut=F,ft=it("wks"),lt=ot.Symbol,dt=ut?lt:lt&&lt.withoutSetter||st,pt=function(t){return at(ft,t)&&(ct||"string"==typeof ft[t])||(ct&&at(lt,t)?ft[t]=lt[t]:ft[t]=dt("Symbol."+t)),ft[t]},ht=T,vt=W,yt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!z(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},gt=pt("toPrimitive"),mt=function(t,e){if(!ht(t)||vt(t))return t;var n,r=t[gt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!ht(n)||vt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),yt(t,e)},bt=mt,wt=W,xt=function(t){var e=bt(t,"string");return wt(e)?e:String(e)},kt=T,St=o.document,Tt=kt(St)&&kt(St.createElement),Et=function(t){return Tt?St.createElement(t):{}},Ot=Et,_t=!s&&!a((function(){return 7!=Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),At=s,Rt=c,Ct=h,It=S,Pt=xt,jt=tt,Lt=_t,Mt=Object.getOwnPropertyDescriptor;i.f=At?Mt:function(t,e){if(t=It(t),e=Pt(e),Lt)try{return Mt(t,e)}catch(t){}if(jt(t,e))return Ct(!Rt.f.call(t,e),t[e])};var Nt={},Dt=T,Bt=function(t){if(!Dt(t))throw TypeError(String(t)+" is not an object");return t},Ft=s,Ut=_t,Wt=Bt,zt=xt,Gt=Object.defineProperty;Nt.f=Ft?Gt:function(t,e,n){if(Wt(t),e=zt(e),Wt(n),Ut)try{return Gt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var $t=Nt,Vt=h,Kt=s?function(t,e,n){return $t.f(t,e,Vt(1,n))}:function(t,e,n){return t[e]=n,t},qt={exports:{}},Yt=Y,Xt=Function.toString;"function"!=typeof Yt.inspectSource&&(Yt.inspectSource=function(t){return Xt.call(t)});var Jt,Ht,Zt,Qt=Yt.inspectSource,te=Qt,ee=o.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),re=G.exports,oe=rt,ie=re("keys"),ae=function(t){return ie[t]||(ie[t]=oe(t))},se={},ce=ne,ue=T,fe=Kt,le=tt,de=Y,pe=ae,he=se,ve="Object already initialized",ye=o.WeakMap;if(ce||de.state){var ge=de.state||(de.state=new ye),me=ge.get,be=ge.has,we=ge.set;Jt=function(t,e){if(be.call(ge,t))throw new TypeError(ve);return e.facade=t,we.call(ge,t,e),e},Ht=function(t){return me.call(ge,t)||{}},Zt=function(t){return be.call(ge,t)}}else{var xe=pe("state");he[xe]=!0,Jt=function(t,e){if(le(t,xe))throw new TypeError(ve);return e.facade=t,fe(t,xe,e),e},Ht=function(t){return le(t,xe)?t[xe]:{}},Zt=function(t){return le(t,xe)}}var ke={set:Jt,get:Ht,has:Zt,enforce:function(t){return Zt(t)?Ht(t):Jt(t,{})},getterFor:function(t){return function(e){var n;if(!ue(e)||(n=Ht(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Se=o,Te=Kt,Ee=tt,Oe=V,_e=Qt,Ae=ke.get,Re=ke.enforce,Ce=String(String).split("String");(qt.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ee(n,"name")||Te(n,"name",e),(o=Re(n)).source||(o.source=Ce.join("string"==typeof e?e:""))),t!==Se?(i?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Te(t,e,n)):a?t[e]=n:Oe(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ae(this).source||_e(this)}));var Ie={},Pe=Math.ceil,je=Math.floor,Le=function(t){return isNaN(t=+t)?0:(t>0?je:Pe)(t)},Me=Le,Ne=Math.min,De=function(t){return t>0?Ne(Me(t),9007199254740991):0},Be=Le,Fe=Math.max,Ue=Math.min,We=function(t,e){var n=Be(t);return n<0?Fe(n+e,0):Ue(n,e)},ze=S,Ge=De,$e=We,Ve=function(t){return function(e,n,r){var o,i=ze(e),a=Ge(i.length),s=$e(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},Ke={includes:Ve(!0),indexOf:Ve(!1)},qe=tt,Ye=S,Xe=Ke.indexOf,Je=se,He=function(t,e){var n,r=Ye(t),o=0,i=[];for(n in r)!qe(Je,n)&&qe(r,n)&&i.push(n);for(;e.length>o;)qe(r,n=e[o++])&&(~Xe(i,n)||i.push(n));return i},Ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=He,tn=Ze.concat("length","prototype");Ie.f=Object.getOwnPropertyNames||function(t){return Qe(t,tn)};var en={};en.f=Object.getOwnPropertySymbols;var nn,rn=Ie,on=en,an=Bt,sn=_("Reflect","ownKeys")||function(t){var e=rn.f(an(t)),n=on.f;return n?e.concat(n(t)):e},cn=tt,un=sn,fn=i,ln=Nt,dn=function(t,e){for(var n=un(e),r=ln.f,o=fn.f,i=0;i<n.length;i++){var a=n[i];cn(t,a)||r(t,a,o(e,a))}},pn=a,hn=/#|\.prototype\./,vn=function(t,e){var n=gn[yn(t)];return n==bn||n!=mn&&("function"==typeof e?pn(e):!!e)},yn=vn.normalize=function(t){return String(t).replace(hn,".").toLowerCase()},gn=vn.data={},mn=vn.NATIVE="N",bn=vn.POLYFILL="P",wn=vn,xn=o,kn=i.f,Sn=Kt,Tn=qt.exports,En=V,On=dn,_n=wn,An=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?xn:u?xn[s]||En(s,{}):(xn[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=kn(n,r))&&a.value:n[r],!_n(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;On(i,o)}(t.sham||o&&o.sham)&&Sn(i,"sham",!0),Tn(n,r,i,t)}},Rn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Cn=He,In=Ze,Pn=Object.keys||function(t){return Cn(t,In)},jn=Nt,Ln=Bt,Mn=Pn,Nn=s?Object.defineProperties:function(t,e){Ln(t);for(var n,r=Mn(e),o=r.length,i=0;o>i;)jn.f(t,n=r[i++],e[n]);return t},Dn=_("document","documentElement"),Bn=Bt,Fn=Nn,Un=Ze,Wn=se,zn=Dn,Gn=Et,$n=ae("IE_PROTO"),Vn=function(){},Kn=function(t){return"<script>"+t+"</"+"script>"},qn=function(t){t.write(Kn("")),t.close();var e=t.parentWindow.Object;return t=null,e},Yn=function(){try{nn=new ActiveXObject("htmlfile")}catch(t){}var t,e;Yn="undefined"!=typeof document?document.domain&&nn?qn(nn):((e=Gn("iframe")).style.display="none",zn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Kn("document.F=Object")),t.close(),t.F):qn(nn);for(var n=Un.length;n--;)delete Yn.prototype[Un[n]];return Yn()};Wn[$n]=!0;var Xn=Object.create||function(t,e){var n;return null!==t?(Vn.prototype=Bn(t),n=new Vn,Vn.prototype=null,n[$n]=t):n=Yn(),void 0===e?n:Fn(n,e)},Jn=Rn,Hn=T,Zn=[].slice,Qn={},tr=function(t,e,n){if(!(e in Qn)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";Qn[e]=Function("C,a","return new C("+r.join(",")+")")}return Qn[e](t,n)},er=Function.bind||function(t){var e=Jn(this),n=Zn.call(arguments,1),r=function(){var o=n.concat(Zn.call(arguments));return this instanceof r?tr(e,o.length,o):e.apply(t,o)};return Hn(e.prototype)&&(r.prototype=e.prototype),r},nr=An,rr=Rn,or=Bt,ir=T,ar=Xn,sr=er,cr=a,ur=_("Reflect","construct"),fr=cr((function(){function t(){}return!(ur((function(){}),[],t)instanceof t)})),lr=!cr((function(){ur((function(){}))})),dr=fr||lr;function pr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function hr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){pr(i,r,o,a,s,"next",t)}function s(t){pr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gr(t,e,n){return e&&yr(t.prototype,e),n&&yr(t,n),t}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function br(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kr(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?xr(t):e}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}nr({target:"Reflect",stat:!0,forced:dr,sham:dr},{construct:function(t,e){rr(t),or(e);var n=arguments.length<3?t:rr(arguments[2]);if(lr&&!fr)return ur(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(sr.apply(t,r))}var o=n.prototype,i=ar(ir(o)?o:Object.prototype),a=Function.apply.call(t,i,e);return ir(a)?a:i}});var Tr,Er=Object.prototype,Or=Er.hasOwnProperty,_r="function"==typeof Symbol?Symbol:{},Ar=_r.iterator||"@@iterator",Rr=_r.asyncIterator||"@@asyncIterator",Cr=_r.toStringTag||"@@toStringTag";function Ir(t,e,n,r){var o=e&&e.prototype instanceof Br?e:Br,i=Object.create(o.prototype),a=new Hr(r||[]);return i._invoke=function(t,e,n){var r=jr;return function(o,i){if(r===Mr)throw new Error("Generator is already running");if(r===Nr){if("throw"===o)throw i;return Qr()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=Yr(a,n);if(s){if(s===Dr)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===jr)throw r=Nr,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=Mr;var c=Pr(t,e,n);if("normal"===c.type){if(r=n.done?Nr:Lr,c.arg===Dr)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=Nr,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function Pr(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}var jr="suspendedStart",Lr="suspendedYield",Mr="executing",Nr="completed",Dr={};function Br(){}function Fr(){}function Ur(){}var Wr={};Wr[Ar]=function(){return this};var zr=Object.getPrototypeOf,Gr=zr&&zr(zr(Zr([])));Gr&&Gr!==Er&&Or.call(Gr,Ar)&&(Wr=Gr);var $r=Ur.prototype=Br.prototype=Object.create(Wr);function Vr(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function Kr(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===Fr||"GeneratorFunction"===(e.displayName||e.name))}function qr(t,e){function n(r,o,i,a){var s=Pr(t[r],t,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===wr(u)&&Or.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(u).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,a)}))}a(s.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function Yr(t,e){var n=t.iterator[e.method];if(n===Tr){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=Tr,Yr(t,e),"throw"===e.method))return Dr;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return Dr}var r=Pr(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,Dr;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=Tr),e.delegate=null,Dr):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,Dr)}function Xr(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Jr(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Hr(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Xr,this),this.reset(!0)}function Zr(t){if(t){var e=t[Ar];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(Or.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=Tr,e.done=!0,e};return r.next=r}}return{next:Qr}}function Qr(){return{value:Tr,done:!0}}Fr.prototype=$r.constructor=Ur,Ur.constructor=Fr,Ur[Cr]=Fr.displayName="GeneratorFunction",Vr(qr.prototype),qr.prototype[Rr]=function(){return this},Vr($r),$r[Cr]="Generator",$r[Ar]=function(){return this},$r.toString=function(){return"[object Generator]"},Hr.prototype={constructor:Hr,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Tr,this.done=!1,this.delegate=null,this.method="next",this.arg=Tr,this.tryEntries.forEach(Jr),!t)for(var e in this)"t"===e.charAt(0)&&Or.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=Tr)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=Tr),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=Or.call(o,"catchLoc"),s=Or.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&Or.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,Dr):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),Dr},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),Jr(n),Dr}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;Jr(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:Zr(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=Tr),Dr}};var to={wrap:Ir,isGeneratorFunction:Kr,AsyncIterator:qr,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Ur):(t.__proto__=Ur,Cr in t||(t[Cr]="GeneratorFunction")),t.prototype=Object.create($r),t},awrap:function(t){return{__await:t}},async:function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new qr(Ir(t,e,n,r),o);return Kr(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:Zr},eo=Object.freeze({__proto__:null,default:to}),no=Xn,ro=Nt,oo=pt("unscopables"),io=Array.prototype;null==io[oo]&&ro.f(io,oo,{configurable:!0,value:no(null)});var ao,so,co,uo=function(t){io[oo][t]=!0},fo={},lo=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),po=tt,ho=H,vo=lo,yo=ae("IE_PROTO"),go=Object.prototype,mo=vo?Object.getPrototypeOf:function(t){return t=ho(t),po(t,yo)?t[yo]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?go:null},bo=a,wo=mo,xo=Kt,ko=pt("iterator"),So=!1;[].keys&&("next"in(co=[].keys())?(so=wo(wo(co)))!==Object.prototype&&(ao=so):So=!0),(null==ao||bo((function(){var t={};return ao[ko].call(t)!==t})))&&(ao={}),"function"!=typeof ao[ko]&&xo(ao,ko,(function(){return this}));var To={IteratorPrototype:ao,BUGGY_SAFARI_ITERATORS:So},Eo=Nt.f,Oo=tt,_o=pt("toStringTag"),Ao=function(t,e,n){t&&!Oo(t=n?t:t.prototype,_o)&&Eo(t,_o,{configurable:!0,value:e})},Ro=To.IteratorPrototype,Co=Xn,Io=h,Po=Ao,jo=fo,Lo=function(){return this},Mo=T,No=Bt,Do=function(t){if(!Mo(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},Bo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return No(n),Do(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Fo=An,Uo=function(t,e,n){var r=e+" Iterator";return t.prototype=Co(Ro,{next:Io(1,n)}),Po(t,r,!1),jo[r]=Lo,t},Wo=mo,zo=Bo,Go=Ao,$o=Kt,Vo=qt.exports,Ko=fo,qo=To.IteratorPrototype,Yo=To.BUGGY_SAFARI_ITERATORS,Xo=pt("iterator"),Jo="keys",Ho="values",Zo="entries",Qo=function(){return this},ti=function(t,e,n,r,o,i,a){Uo(n,e,r);var s,c,u,f=function(t){if(t===o&&v)return v;if(!Yo&&t in p)return p[t];switch(t){case Jo:case Ho:case Zo:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",d=!1,p=t.prototype,h=p[Xo]||p["@@iterator"]||o&&p[o],v=!Yo&&h||f(o),y="Array"==e&&p.entries||h;if(y&&(s=Wo(y.call(new t)))!==Object.prototype&&s.next&&(Wo(s)!==qo&&(zo?zo(s,qo):"function"!=typeof s[Xo]&&$o(s,Xo,Qo)),Go(s,l,!0)),o==Ho&&h&&h.name!==Ho&&(d=!0,v=function(){return h.call(this)}),p[Xo]!==v&&$o(p,Xo,v),Ko[e]=v,o)if(c={values:f(Ho),keys:i?v:f(Jo),entries:f(Zo)},a)for(u in c)(Yo||d||!(u in p))&&Vo(p,u,c[u]);else Fo({target:e,proto:!0,forced:Yo||d},c);return c},ei=S,ni=uo,ri=fo,oi=ke,ii=ti,ai="Array Iterator",si=oi.set,ci=oi.getterFor(ai),ui=ii(Array,"Array",(function(t,e){si(this,{type:ai,target:ei(t),index:0,kind:e})}),(function(){var t=ci(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ri.Arguments=ri.Array,ni("keys"),ni("values"),ni("entries");var fi={exports:{}},li={},di=S,pi=Ie.f,hi={}.toString,vi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];li.f=function(t){return vi&&"[object Window]"==hi.call(t)?function(t){try{return pi(t)}catch(t){return vi.slice()}}(t):pi(di(t))};var yi=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),gi=An,mi=se,bi=T,wi=tt,xi=Nt.f,ki=Ie,Si=li,Ti=yi,Ei=!1,Oi=rt("meta"),_i=0,Ai=Object.isExtensible||function(){return!0},Ri=function(t){xi(t,Oi,{value:{objectID:"O"+_i++,weakData:{}}})},Ci=fi.exports={enable:function(){Ci.enable=function(){},Ei=!0;var t=ki.f,e=[].splice,n={};n[Oi]=1,t(n).length&&(ki.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===Oi){e.call(r,o,1);break}return r},gi({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Si.f}))},fastKey:function(t,e){if(!bi(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!wi(t,Oi)){if(!Ai(t))return"F";if(!e)return"E";Ri(t)}return t[Oi].objectID},getWeakData:function(t,e){if(!wi(t,Oi)){if(!Ai(t))return!0;if(!e)return!1;Ri(t)}return t[Oi].weakData},onFreeze:function(t){return Ti&&Ei&&Ai(t)&&!wi(t,Oi)&&Ri(t),t}};mi[Oi]=!0;var Ii=fo,Pi=pt("iterator"),ji=Array.prototype,Li=function(t){return void 0!==t&&(Ii.Array===t||ji[Pi]===t)},Mi=Rn,Ni=function(t,e,n){if(Mi(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Di={};Di[pt("toStringTag")]="z";var Bi="[object z]"===String(Di),Fi=Bi,Ui=y,Wi=pt("toStringTag"),zi="Arguments"==Ui(function(){return arguments}()),Gi=Fi?Ui:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Wi))?n:zi?Ui(e):"Object"==(r=Ui(e))&&"function"==typeof e.callee?"Arguments":r},$i=Gi,Vi=fo,Ki=pt("iterator"),qi=function(t){if(null!=t)return t[Ki]||t["@@iterator"]||Vi[$i(t)]},Yi=Bt,Xi=qi,Ji=function(t,e){var n=arguments.length<2?Xi(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return Yi(n.call(t))},Hi=Bt,Zi=function(t,e,n){var r,o;Hi(t);try{if(void 0===(r=t.return)){if("throw"===e)throw n;return n}r=r.call(t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Hi(r),n},Qi=Bt,ta=Li,ea=De,na=Ni,ra=Ji,oa=qi,ia=Zi,aa=function(t,e){this.stopped=t,this.result=e},sa=function(t,e,n){var r,o,i,a,s,c,u,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=na(e,f,1+l+p),v=function(t){return r&&ia(r,"normal",t),new aa(!0,t)},y=function(t){return l?(Qi(t),p?h(t[0],t[1],v):h(t[0],t[1])):p?h(t,v):h(t)};if(d)r=t;else{if("function"!=typeof(o=oa(t)))throw TypeError("Target is not iterable");if(ta(o)){for(i=0,a=ea(t.length);a>i;i++)if((s=y(t[i]))&&s instanceof aa)return s;return new aa(!1)}r=ra(t,o)}for(c=r.next;!(u=c.call(r)).done;){try{s=y(u.value)}catch(t){ia(r,"throw",t)}if("object"==typeof s&&s&&s instanceof aa)return s}return new aa(!1)},ca=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ua=pt("iterator"),fa=!1;try{var la=0,da={next:function(){return{done:!!la++}},return:function(){fa=!0}};da[ua]=function(){return this},Array.from(da,(function(){throw 2}))}catch(t){}var pa=function(t,e){if(!e&&!fa)return!1;var n=!1;try{var r={};r[ua]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ha=T,va=Bo,ya=function(t,e,n){var r,o;return va&&"function"==typeof(r=e.constructor)&&r!==n&&ha(o=r.prototype)&&o!==n.prototype&&va(t,o),t},ga=An,ma=o,ba=wn,wa=qt.exports,xa=fi.exports,ka=sa,Sa=ca,Ta=T,Ea=a,Oa=pa,_a=Ao,Aa=ya,Ra=function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",a=ma[t],s=a&&a.prototype,c=a,u={},f=function(t){var e=s[t];wa(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!Ta(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Ta(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Ta(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(ba(t,"function"!=typeof a||!(o||s.forEach&&!Ea((function(){(new a).entries().next()})))))c=n.getConstructor(e,t,r,i),xa.enable();else if(ba(t,!0)){var l=new c,d=l[i](o?{}:-0,1)!=l,p=Ea((function(){l.has(1)})),h=Oa((function(t){new a(t)})),v=!o&&Ea((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));h||((c=e((function(e,n){Sa(e,c,t);var o=Aa(new a,e,c);return null!=n&&ka(n,o[i],{that:o,AS_ENTRIES:r}),o}))).prototype=s,s.constructor=c),(p||v)&&(f("delete"),f("has"),r&&f("get")),(v||d)&&f(i),o&&s.clear&&delete s.clear}return u[t]=c,ga({global:!0,forced:c!=a},u),_a(c,t),o||n.setStrong(c,t,r),c},Ca=qt.exports,Ia=function(t,e,n){for(var r in e)Ca(t,r,e[r],n);return t},Pa=_,ja=Nt,La=s,Ma=pt("species"),Na=function(t){var e=Pa(t),n=ja.f;La&&e&&!e[Ma]&&n(e,Ma,{configurable:!0,get:function(){return this}})},Da=Nt.f,Ba=Xn,Fa=Ia,Ua=Ni,Wa=ca,za=sa,Ga=ti,$a=Na,Va=s,Ka=fi.exports.fastKey,qa=ke.set,Ya=ke.getterFor,Xa={getConstructor:function(t,e,n,r){var o=t((function(t,i){Wa(t,o,e),qa(t,{type:e,index:Ba(null),first:void 0,last:void 0,size:0}),Va||(t.size=0),null!=i&&za(i,t[r],{that:t,AS_ENTRIES:n})})),i=Ya(e),a=function(t,e,n){var r,o,a=i(t),c=s(t,e);return c?c.value=n:(a.last=c={index:o=Ka(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),Va?a.size++:t.size++,"F"!==o&&(a.index[o]=c)),t},s=function(t,e){var n,r=i(t),o=Ka(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Fa(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,Va?t.size=0:this.size=0},delete:function(t){var e=this,n=i(e),r=s(e,t);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first==r&&(n.first=o),n.last==r&&(n.last=a),Va?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=i(this),r=Ua(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Fa(o.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),Va&&Da(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=Ya(e),i=Ya(r);Ga(t,e,(function(t,e){qa(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),$a(e)}};Ra("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Xa);var Ja=Gi,Ha=Bi?{}.toString:function(){return"[object "+Ja(this)+"]"},Za=Bi,Qa=qt.exports,ts=Ha;Za||Qa(Object.prototype,"toString",ts,{unsafe:!0});var es=W,ns=function(t){if(es(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},rs=Le,os=ns,is=w,as=function(t){return function(e,n){var r,o,i=os(is(e)),a=rs(n),s=i.length;return a<0||a>=s?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},ss={codeAt:as(!1),charAt:as(!0)},cs=ss.charAt,us=ns,fs=ke,ls=ti,ds="String Iterator",ps=fs.set,hs=fs.getterFor(ds);ls(String,"String",(function(t){ps(this,{type:ds,string:us(t),index:0})}),(function(){var t,e=hs(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=cs(n,r),e.index+=t.length,{value:t,done:!1})}));var vs={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ys=Et("span").classList,gs=ys&&ys.constructor&&ys.constructor.prototype,ms=gs===Object.prototype?void 0:gs,bs=o,ws=vs,xs=ms,ks=ui,Ss=Kt,Ts=pt,Es=Ts("iterator"),Os=Ts("toStringTag"),_s=ks.values,As=function(t,e){if(t){if(t[Es]!==_s)try{Ss(t,Es,_s)}catch(e){t[Es]=_s}if(t[Os]||Ss(t,Os,e),ws[e])for(var n in ks)if(t[n]!==ks[n])try{Ss(t,n,ks[n])}catch(e){t[n]=ks[n]}}};for(var Rs in ws)As(bs[Rs]&&bs[Rs].prototype,Rs);As(xs,"DOMTokenList");var Cs=y,Is=Array.isArray||function(t){return"Array"==Cs(t)},Ps=xt,js=Nt,Ls=h,Ms=function(t,e,n){var r=Ps(e);r in t?js.f(t,r,Ls(0,n)):t[r]=n},Ns=T,Ds=Is,Bs=pt("species"),Fs=function(t){var e;return Ds(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Ds(e.prototype)?Ns(e)&&null===(e=e[Bs])&&(e=void 0):e=void 0),void 0===e?Array:e},Us=function(t,e){return new(Fs(t))(0===e?0:e)},Ws=a,zs=M,Gs=pt("species"),$s=function(t){return zs>=51||!Ws((function(){var e=[];return(e.constructor={})[Gs]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Vs=An,Ks=a,qs=Is,Ys=T,Xs=H,Js=De,Hs=Ms,Zs=Us,Qs=$s,tc=M,ec=pt("isConcatSpreadable"),nc=9007199254740991,rc="Maximum allowed index exceeded",oc=tc>=51||!Ks((function(){var t=[];return t[ec]=!1,t.concat()[0]!==t})),ic=Qs("concat"),ac=function(t){if(!Ys(t))return!1;var e=t[ec];return void 0!==e?!!e:qs(t)};Vs({target:"Array",proto:!0,forced:!oc||!ic},{concat:function(t){var e,n,r,o,i,a=Xs(this),s=Zs(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(ac(i=-1===e?a:arguments[e])){if(c+(o=Js(i.length))>nc)throw TypeError(rc);for(n=0;n<o;n++,c++)n in i&&Hs(s,c,i[n])}else{if(c>=nc)throw TypeError(rc);Hs(s,c++,i)}return s.length=c,s}});var sc=Ni,cc=b,uc=H,fc=De,lc=Us,dc=[].push,pc=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,f,l){for(var d,p,h=uc(c),v=cc(h),y=sc(u,f,3),g=fc(v.length),m=0,b=l||lc,w=e?b(c,g):n||a?b(c,0):void 0;g>m;m++)if((s||m in v)&&(p=y(d=v[m],m,h),t))if(e)w[m]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return m;case 2:dc.call(w,d)}else switch(t){case 4:return!1;case 7:dc.call(w,d)}return i?-1:r||o?o:w}},hc={forEach:pc(0),map:pc(1),filter:pc(2),some:pc(3),every:pc(4),find:pc(5),findIndex:pc(6),filterReject:pc(7)},vc=a,yc=function(t,e){var n=[][t];return!!n&&vc((function(){n.call(null,e||function(){throw 1},1)}))},gc=hc.forEach,mc=o,bc=vs,wc=ms,xc=yc("forEach")?[].forEach:function(t){return gc(this,t,arguments.length>1?arguments[1]:void 0)},kc=Kt,Sc=function(t){if(t&&t.forEach!==xc)try{kc(t,"forEach",xc)}catch(e){t.forEach=xc}};for(var Tc in bc)Sc(mc[Tc]&&mc[Tc].prototype);Sc(wc);var Ec,Oc,_c,Ac,Rc=o.Promise,Cc=Bt,Ic=Rn,Pc=pt("species"),jc=function(t,e){var n,r=Cc(t).constructor;return void 0===r||null==(n=Cc(r)[Pc])?e:Ic(n)},Lc=/(?:ipad|iphone|ipod).*applewebkit/i.test(A),Mc="process"==y(o.process),Nc=o,Dc=a,Bc=Ni,Fc=Dn,Uc=Et,Wc=Lc,zc=Mc,Gc=Nc.setImmediate,$c=Nc.clearImmediate,Vc=Nc.process,Kc=Nc.MessageChannel,qc=Nc.Dispatch,Yc=0,Xc={},Jc="onreadystatechange";try{Ec=Nc.location}catch(t){}var Hc=function(t){if(Xc.hasOwnProperty(t)){var e=Xc[t];delete Xc[t],e()}},Zc=function(t){return function(){Hc(t)}},Qc=function(t){Hc(t.data)},tu=function(t){Nc.postMessage(String(t),Ec.protocol+"//"+Ec.host)};Gc&&$c||(Gc=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return Xc[++Yc]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Oc(Yc),Yc},$c=function(t){delete Xc[t]},zc?Oc=function(t){Vc.nextTick(Zc(t))}:qc&&qc.now?Oc=function(t){qc.now(Zc(t))}:Kc&&!Wc?(Ac=(_c=new Kc).port2,_c.port1.onmessage=Qc,Oc=Bc(Ac.postMessage,Ac,1)):Nc.addEventListener&&"function"==typeof postMessage&&!Nc.importScripts&&Ec&&"file:"!==Ec.protocol&&!Dc(tu)?(Oc=tu,Nc.addEventListener("message",Qc,!1)):Oc=Jc in Uc("script")?function(t){Fc.appendChild(Uc("script")).onreadystatechange=function(){Fc.removeChild(this),Hc(t)}}:function(t){setTimeout(Zc(t),0)});var eu,nu,ru,ou,iu,au,su,cu,uu={set:Gc,clear:$c},fu=o,lu=/ipad|iphone|ipod/i.test(A)&&void 0!==fu.Pebble,du=/web0s(?!.*chrome)/i.test(A),pu=o,hu=i.f,vu=uu.set,yu=Lc,gu=lu,mu=du,bu=Mc,wu=pu.MutationObserver||pu.WebKitMutationObserver,xu=pu.document,ku=pu.process,Su=pu.Promise,Tu=hu(pu,"queueMicrotask"),Eu=Tu&&Tu.value;Eu||(eu=function(){var t,e;for(bu&&(t=ku.domain)&&t.exit();nu;){e=nu.fn,nu=nu.next;try{e()}catch(t){throw nu?ou():ru=void 0,t}}ru=void 0,t&&t.enter()},yu||bu||mu||!wu||!xu?!gu&&Su&&Su.resolve?((su=Su.resolve(void 0)).constructor=Su,cu=su.then,ou=function(){cu.call(su,eu)}):ou=bu?function(){ku.nextTick(eu)}:function(){vu.call(pu,eu)}:(iu=!0,au=xu.createTextNode(""),new wu(eu).observe(au,{characterData:!0}),ou=function(){au.data=iu=!iu}));var Ou=Eu||function(t){var e={fn:t,next:void 0};ru&&(ru.next=e),nu||(nu=e,ou()),ru=e},_u={},Au=Rn,Ru=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Au(e),this.reject=Au(n)};_u.f=function(t){return new Ru(t)};var Cu,Iu,Pu,ju,Lu=Bt,Mu=T,Nu=_u,Du=o,Bu="object"==typeof window,Fu=An,Uu=o,Wu=_,zu=Rc,Gu=qt.exports,$u=Ia,Vu=Bo,Ku=Ao,qu=Na,Yu=T,Xu=Rn,Ju=ca,Hu=Qt,Zu=sa,Qu=pa,tf=jc,ef=uu.set,nf=Ou,rf=function(t,e){if(Lu(t),Mu(e)&&e.constructor===t)return e;var n=Nu.f(t);return(0,n.resolve)(e),n.promise},of=function(t,e){var n=Du.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},af=_u,sf=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},cf=ke,uf=wn,ff=Bu,lf=Mc,df=M,pf=pt("species"),hf="Promise",vf=cf.get,yf=cf.set,gf=cf.getterFor(hf),mf=zu&&zu.prototype,bf=zu,wf=mf,xf=Uu.TypeError,kf=Uu.document,Sf=Uu.process,Tf=af.f,Ef=Tf,Of=!!(kf&&kf.createEvent&&Uu.dispatchEvent),_f="function"==typeof PromiseRejectionEvent,Af="unhandledrejection",Rf=!1,Cf=uf(hf,(function(){var t=Hu(bf),e=t!==String(bf);if(!e&&66===df)return!0;if(df>=51&&/native code/.test(t))return!1;var n=new bf((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[pf]=r,!(Rf=n.then((function(){}))instanceof r)||!e&&ff&&!_f})),If=Cf||!Qu((function(t){bf.all(t).catch((function(){}))})),Pf=function(t){var e;return!(!Yu(t)||"function"!=typeof(e=t.then))&&e},jf=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;nf((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,s,c,u=n[i++],f=o?u.ok:u.fail,l=u.resolve,d=u.reject,p=u.domain;try{f?(o||(2===t.rejection&&Df(t),t.rejection=1),!0===f?a=r:(p&&p.enter(),a=f(r),p&&(p.exit(),c=!0)),a===u.promise?d(xf("Promise-chain cycle")):(s=Pf(a))?s.call(a,l,d):l(a)):d(r)}catch(t){p&&!c&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Mf(t)}))}},Lf=function(t,e,n){var r,o;Of?((r=kf.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Uu.dispatchEvent(r)):r={promise:e,reason:n},!_f&&(o=Uu["on"+t])?o(r):t===Af&&of("Unhandled promise rejection",n)},Mf=function(t){ef.call(Uu,(function(){var e,n=t.facade,r=t.value;if(Nf(t)&&(e=sf((function(){lf?Sf.emit("unhandledRejection",r,n):Lf(Af,n,r)})),t.rejection=lf||Nf(t)?2:1,e.error))throw e.value}))},Nf=function(t){return 1!==t.rejection&&!t.parent},Df=function(t){ef.call(Uu,(function(){var e=t.facade;lf?Sf.emit("rejectionHandled",e):Lf("rejectionhandled",e,t.value)}))},Bf=function(t,e,n){return function(r){t(e,r,n)}},Ff=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,jf(t,!0))},Uf=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw xf("Promise can't be resolved itself");var r=Pf(e);r?nf((function(){var n={done:!1};try{r.call(e,Bf(Uf,n,t),Bf(Ff,n,t))}catch(e){Ff(n,e,t)}})):(t.value=e,t.state=1,jf(t,!1))}catch(e){Ff({done:!1},e,t)}}};if(Cf&&(wf=(bf=function(t){Ju(this,bf,hf),Xu(t),Cu.call(this);var e=vf(this);try{t(Bf(Uf,e),Bf(Ff,e))}catch(t){Ff(e,t)}}).prototype,(Cu=function(t){yf(this,{type:hf,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=$u(wf,{then:function(t,e){var n=gf(this),r=Tf(tf(this,bf));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=lf?Sf.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&jf(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Iu=function(){var t=new Cu,e=vf(t);this.promise=t,this.resolve=Bf(Uf,e),this.reject=Bf(Ff,e)},af.f=Tf=function(t){return t===bf||t===Pu?new Iu(t):Ef(t)},"function"==typeof zu&&mf!==Object.prototype)){ju=mf.then,Rf||(Gu(mf,"then",(function(t,e){var n=this;return new bf((function(t,e){ju.call(n,t,e)})).then(t,e)}),{unsafe:!0}),Gu(mf,"catch",wf.catch,{unsafe:!0}));try{delete mf.constructor}catch(t){}Vu&&Vu(mf,wf)}function Wf(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":wr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function zf(t,e){if("object"===("undefined"==typeof Reflect?"undefined":wr(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Gf(){}function $f(){$f.init.call(this)}function Vf(t){return void 0===t._maxListeners?$f.defaultMaxListeners:t._maxListeners}function Kf(t,e,n){if(e)t.call(n);else for(var r=t.length,o=tl(t,r),i=0;i<r;++i)o[i].call(n)}function qf(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=tl(t,o),a=0;a<o;++a)i[a].call(n,r)}function Yf(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=tl(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function Xf(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=tl(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function Jf(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=tl(t,o),a=0;a<o;++a)i[a].apply(n,r)}function Hf(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new Gf,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=Vf(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function Zf(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function Qf(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function tl(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Fu({global:!0,wrap:!0,forced:Cf},{Promise:bf}),Ku(bf,hf,!1),qu(hf),Pu=Wu(hf),Fu({target:hf,stat:!0,forced:Cf},{reject:function(t){var e=Tf(this);return e.reject.call(void 0,t),e.promise}}),Fu({target:hf,stat:!0,forced:Cf},{resolve:function(t){return rf(this,t)}}),Fu({target:hf,stat:!0,forced:If},{all:function(t){var e=this,n=Tf(e),r=n.resolve,o=n.reject,i=sf((function(){var n=Xu(e.resolve),i=[],a=0,s=1;Zu(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Tf(e),r=n.reject,o=sf((function(){var o=Xu(e.resolve);Zu(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),Gf.prototype=Object.create(null),$f.EventEmitter=$f,$f.usingDomains=!1,$f.prototype.domain=void 0,$f.prototype._events=void 0,$f.prototype._maxListeners=void 0,$f.defaultMaxListeners=10,$f.init=function(){this.domain=null,$f.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Gf,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},$f.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},$f.prototype.getMaxListeners=function(){return Vf(this)},$f.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:Kf(n,f,this);break;case 2:qf(n,f,this,arguments[1]);break;case 3:Yf(n,f,this,arguments[1],arguments[2]);break;case 4:Xf(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];Jf(n,f,this,o)}return!0},$f.prototype.addListener=function(t,e){return Hf(this,t,e,!1)},$f.prototype.on=$f.prototype.addListener,$f.prototype.prependListener=function(t,e){return Hf(this,t,e,!0)},$f.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Zf(this,t,e)),this},$f.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Zf(this,t,e)),this},$f.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Gf:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Gf,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},$f.prototype.off=function(t,e){return this.removeListener(t,e)},$f.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Gf,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Gf:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Gf,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},$f.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},$f.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Qf.call(t,e)},$f.prototype.listenerCount=Qf,$f.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var el={},nl={exports:{}};!function(t){function e(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function s(t){e(a,o,i,s,c,"next",t)}function c(t){e(a,o,i,s,c,"throw",t)}s(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0}(nl);var rl={exports:{}};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0}(rl);var ol,il={exports:{}};(ol=il).exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},ol.exports.default=ol.exports,ol.exports.__esModule=!0;var al={exports:{}},sl={exports:{}},cl={exports:{}};!function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(cl),function(t){var e=cl.exports;t.exports=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0}(sl),function(t){var e=sl.exports;function n(r,o,i){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=n=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t,n,r){var o=e(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(r):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),n(r,o,i||r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0}(al);var ul={exports:{}},fl={exports:{}};!function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(fl),function(t){var e=fl.exports;t.exports=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)},t.exports.default=t.exports,t.exports.__esModule=!0}(ul);var ll={exports:{}},dl={exports:{}};!function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(dl),function(t){var e=dl.exports.default,n=il.exports;t.exports=function(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?n(t):r},t.exports.default=t.exports,t.exports.__esModule=!0}(ll);var pl={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}(pl);var hl={exports:{}};!function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0}(hl);var vl=n(eo),yl=Bt,gl=function(){var t=yl(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},ml=qt.exports,bl=Bt,wl=ns,xl=a,kl=gl,Sl="toString",Tl=RegExp.prototype,El=Tl.toString,Ol=xl((function(){return"/a/b"!=El.call({source:"a",flags:"b"})})),_l=El.name!=Sl;(Ol||_l)&&ml(RegExp.prototype,Sl,(function(){var t=bl(this),e=wl(t.source),n=t.flags;return"/"+e+"/"+wl(void 0===n&&t instanceof RegExp&&!("flags"in Tl)?kl.call(t):n)}),{unsafe:!0});var Al=An,Rl=S,Cl=[].join,Il=b!=Object,Pl=yc("join",",");Al({target:"Array",proto:!0,forced:Il||!Pl},{join:function(t){return Cl.call(Rl(this),void 0===t?",":t)}});var jl=hc.map;An({target:"Array",proto:!0,forced:!$s("map")},{map:function(t){return jl(this,t,arguments.length>1?arguments[1]:void 0)}});var Ll={},Ml=An,Nl=T,Dl=Is,Bl=We,Fl=De,Ul=S,Wl=Ms,zl=pt,Gl=$s("slice"),$l=zl("species"),Vl=[].slice,Kl=Math.max;Ml({target:"Array",proto:!0,forced:!Gl},{slice:function(t,e){var n,r,o,i=Ul(this),a=Fl(i.length),s=Bl(t,a),c=Bl(void 0===e?a:e,a);if(Dl(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Dl(n.prototype)?Nl(n)&&null===(n=n[$l])&&(n=void 0):n=void 0,n===Array||void 0===n))return Vl.call(i,s,c);for(r=new(void 0===n?Array:n)(Kl(c-s,0)),o=0;s<c;s++,o++)s in i&&Wl(r,o,i[s]);return r.length=o,r}});var ql=Bt,Yl=Zi,Xl=Ni,Jl=H,Hl=function(t,e,n,r){try{return r?e(ql(n)[0],n[1]):e(n)}catch(e){Yl(t,"throw",e)}},Zl=Li,Ql=De,td=Ms,ed=Ji,nd=qi,rd=function(t){var e,n,r,o,i,a,s=Jl(t),c="function"==typeof this?this:Array,u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,d=nd(s),p=0;if(l&&(f=Xl(f,u>2?arguments[2]:void 0,2)),null==d||c==Array&&Zl(d))for(n=new c(e=Ql(s.length));e>p;p++)a=l?f(s[p],p):s[p],td(n,p,a);else for(i=(o=ed(s,d)).next,n=new c;!(r=i.call(o)).done;p++)a=l?Hl(o,f,[r.value,p],!0):r.value,td(n,p,a);return n.length=p,n};An({target:"Array",stat:!0,forced:!pa((function(t){Array.from(t)}))},{from:rd});var od={},id=pt;od.f=id;var ad=o,sd=tt,cd=od,ud=Nt.f,fd=function(t){var e=ad.Symbol||(ad.Symbol={});sd(e,t)||ud(e,t,{value:cd.f(t)})},ld=An,dd=o,pd=_,hd=s,vd=B,yd=a,gd=tt,md=Is,bd=T,wd=W,xd=Bt,kd=H,Sd=S,Td=xt,Ed=ns,Od=h,_d=Xn,Ad=Pn,Rd=Ie,Cd=li,Id=en,Pd=i,jd=Nt,Ld=c,Md=Kt,Nd=qt.exports,Dd=G.exports,Bd=se,Fd=rt,Ud=pt,Wd=od,zd=fd,Gd=Ao,$d=ke,Vd=hc.forEach,Kd=ae("hidden"),qd="Symbol",Yd=Ud("toPrimitive"),Xd=$d.set,Jd=$d.getterFor(qd),Hd=Object.prototype,Zd=dd.Symbol,Qd=pd("JSON","stringify"),tp=Pd.f,ep=jd.f,np=Cd.f,rp=Ld.f,op=Dd("symbols"),ip=Dd("op-symbols"),ap=Dd("string-to-symbol-registry"),sp=Dd("symbol-to-string-registry"),cp=Dd("wks"),up=dd.QObject,fp=!up||!up.prototype||!up.prototype.findChild,lp=hd&&yd((function(){return 7!=_d(ep({},"a",{get:function(){return ep(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=tp(Hd,e);r&&delete Hd[e],ep(t,e,n),r&&t!==Hd&&ep(Hd,e,r)}:ep,dp=function(t,e){var n=op[t]=_d(Zd.prototype);return Xd(n,{type:qd,tag:t,description:e}),hd||(n.description=e),n},pp=function(t,e,n){t===Hd&&pp(ip,e,n),xd(t);var r=Td(e);return xd(n),gd(op,r)?(n.enumerable?(gd(t,Kd)&&t[Kd][r]&&(t[Kd][r]=!1),n=_d(n,{enumerable:Od(0,!1)})):(gd(t,Kd)||ep(t,Kd,Od(1,{})),t[Kd][r]=!0),lp(t,r,n)):ep(t,r,n)},hp=function(t,e){xd(t);var n=Sd(e),r=Ad(n).concat(mp(n));return Vd(r,(function(e){hd&&!vp.call(n,e)||pp(t,e,n[e])})),t},vp=function(t){var e=Td(t),n=rp.call(this,e);return!(this===Hd&&gd(op,e)&&!gd(ip,e))&&(!(n||!gd(this,e)||!gd(op,e)||gd(this,Kd)&&this[Kd][e])||n)},yp=function(t,e){var n=Sd(t),r=Td(e);if(n!==Hd||!gd(op,r)||gd(ip,r)){var o=tp(n,r);return!o||!gd(op,r)||gd(n,Kd)&&n[Kd][r]||(o.enumerable=!0),o}},gp=function(t){var e=np(Sd(t)),n=[];return Vd(e,(function(t){gd(op,t)||gd(Bd,t)||n.push(t)})),n},mp=function(t){var e=t===Hd,n=np(e?ip:Sd(t)),r=[];return Vd(n,(function(t){!gd(op,t)||e&&!gd(Hd,t)||r.push(op[t])})),r};(vd||(Nd((Zd=function(){if(this instanceof Zd)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Ed(arguments[0]):void 0,e=Fd(t),n=function(t){this===Hd&&n.call(ip,t),gd(this,Kd)&&gd(this[Kd],e)&&(this[Kd][e]=!1),lp(this,e,Od(1,t))};return hd&&fp&&lp(Hd,e,{configurable:!0,set:n}),dp(e,t)}).prototype,"toString",(function(){return Jd(this).tag})),Nd(Zd,"withoutSetter",(function(t){return dp(Fd(t),t)})),Ld.f=vp,jd.f=pp,Pd.f=yp,Rd.f=Cd.f=gp,Id.f=mp,Wd.f=function(t){return dp(Ud(t),t)},hd&&(ep(Zd.prototype,"description",{configurable:!0,get:function(){return Jd(this).description}}),Nd(Hd,"propertyIsEnumerable",vp,{unsafe:!0}))),ld({global:!0,wrap:!0,forced:!vd,sham:!vd},{Symbol:Zd}),Vd(Ad(cp),(function(t){zd(t)})),ld({target:qd,stat:!0,forced:!vd},{for:function(t){var e=Ed(t);if(gd(ap,e))return ap[e];var n=Zd(e);return ap[e]=n,sp[n]=e,n},keyFor:function(t){if(!wd(t))throw TypeError(t+" is not a symbol");if(gd(sp,t))return sp[t]},useSetter:function(){fp=!0},useSimple:function(){fp=!1}}),ld({target:"Object",stat:!0,forced:!vd,sham:!hd},{create:function(t,e){return void 0===e?_d(t):hp(_d(t),e)},defineProperty:pp,defineProperties:hp,getOwnPropertyDescriptor:yp}),ld({target:"Object",stat:!0,forced:!vd},{getOwnPropertyNames:gp,getOwnPropertySymbols:mp}),ld({target:"Object",stat:!0,forced:yd((function(){Id.f(1)}))},{getOwnPropertySymbols:function(t){return Id.f(kd(t))}}),Qd)&&ld({target:"JSON",stat:!0,forced:!vd||yd((function(){var t=Zd();return"[null]"!=Qd([t])||"{}"!=Qd({a:t})||"{}"!=Qd(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(bd(e)||void 0!==t)&&!wd(t))return md(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!wd(e))return e}),o[1]=e,Qd.apply(null,o)}});Zd.prototype[Yd]||Md(Zd.prototype,Yd,Zd.prototype.valueOf),Gd(Zd,qd),Bd[Kd]=!0;var bp=An,wp=s,xp=o,kp=tt,Sp=T,Tp=Nt.f,Ep=dn,Op=xp.Symbol;if(wp&&"function"==typeof Op&&(!("description"in Op.prototype)||void 0!==Op().description)){var _p={},Ap=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Ap?new Op(t):void 0===t?Op():Op(t);return""===t&&(_p[e]=!0),e};Ep(Ap,Op);var Rp=Ap.prototype=Op.prototype;Rp.constructor=Ap;var Cp=Rp.toString,Ip="Symbol(test)"==String(Op("test")),Pp=/^Symbol\((.*)\)[^)]+$/;Tp(Rp,"description",{configurable:!0,get:function(){var t=Sp(this)?this.valueOf():this,e=Cp.call(t);if(kp(_p,t))return"";var n=Ip?e.slice(7,-1):e.replace(Pp,"$1");return""===n?void 0:n}}),bp({global:!0,forced:!0},{Symbol:Ap})}fd("iterator");var jp=s,Lp=Nt.f,Mp=Function.prototype,Np=Mp.toString,Dp=/^\s*function ([^ (]*)/,Bp="name";jp&&!(Bp in Mp)&&Lp(Mp,Bp,{configurable:!0,get:function(){try{return Np.call(this).match(Dp)[1]}catch(t){return""}}});var Fp=T,Up=Math.floor,Wp=function(t){return!Fp(t)&&isFinite(t)&&Up(t)===t};An({target:"Number",stat:!0},{isInteger:Wp});var zp=w,Gp=ns,$p="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",Vp=RegExp("^"+$p+$p+"*"),Kp=RegExp($p+$p+"*$"),qp=function(t){return function(e){var n=Gp(zp(e));return 1&t&&(n=n.replace(Vp,"")),2&t&&(n=n.replace(Kp,"")),n}},Yp={start:qp(1),end:qp(2),trim:qp(3)},Xp=s,Jp=o,Hp=wn,Zp=qt.exports,Qp=tt,th=y,eh=ya,nh=W,rh=mt,oh=a,ih=Xn,ah=Ie.f,sh=i.f,ch=Nt.f,uh=Yp.trim,fh="Number",lh=Jp.Number,dh=lh.prototype,ph=th(ih(dh))==fh,hh=function(t){if(nh(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,o,i,a,s,c,u=rh(t,"number");if("string"==typeof u&&u.length>2)if(43===(e=(u=uh(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(Hp(fh,!lh(" 0o1")||!lh("0b1")||lh("+0x1"))){for(var vh,yh=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof yh&&(ph?oh((function(){dh.valueOf.call(n)})):th(n)!=fh)?eh(new lh(hh(e)),n,yh):hh(e)},gh=Xp?ah(lh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),mh=0;gh.length>mh;mh++)Qp(lh,vh=gh[mh])&&!Qp(yh,vh)&&ch(yh,vh,sh(lh,vh));yh.prototype=dh,dh.constructor=yh,Zp(Jp,fh,yh)}var bh={exports:{}},wh={exports:{}};!function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0}(wh);var xh={exports:{}};!function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0}(xh);var kh={exports:{}},Sh={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0}(Sh),function(t){var e=Sh.exports;t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0}(kh);var Th={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}(Th),function(t){var e=wh.exports,n=xh.exports,r=kh.exports,o=Th.exports;t.exports=function(t,i){return e(t)||n(t,i)||r(t,i)||o()},t.exports.default=t.exports,t.exports.__esModule=!0}(bh);var Eh=s,Oh=Pn,_h=S,Ah=c.f,Rh=function(t){return function(e){for(var n,r=_h(e),o=Oh(r),i=o.length,a=0,s=[];i>a;)n=o[a++],Eh&&!Ah.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},Ch={entries:Rh(!0),values:Rh(!1)}.entries;An({target:"Object",stat:!0},{entries:function(t){return Ch(t)}});var Ih={exports:{}},Ph={exports:{}};!function(t){var e=Sh.exports;t.exports=function(t){if(Array.isArray(t))return e(t)},t.exports.default=t.exports,t.exports.__esModule=!0}(Ph);var jh={exports:{}};!function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0}(jh);var Lh={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}(Lh),function(t){var e=Ph.exports,n=jh.exports,r=kh.exports,o=Lh.exports;t.exports=function(t){return e(t)||n(t)||r(t)||o()},t.exports.default=t.exports,t.exports.__esModule=!0}(Ih);var Mh=Ke.includes,Nh=uo;An({target:"Array",proto:!0},{includes:function(t){return Mh(this,t,arguments.length>1?arguments[1]:void 0)}}),Nh("includes"),Object.defineProperty(Ll,"__esModule",{value:!0});var Dh=bh.exports,Bh=Ih.exports,Fh=pl.exports,Uh=ul.exports,Wh=ll.exports,zh=cl.exports;function Gh(t){return t&&"object"===wr(t)&&"default"in t?t:{default:t}}var $h=Gh(dl.exports),Vh=Gh(Dh),Kh=Gh(Bh),qh=Gh(Fh),Yh=Gh(Uh),Xh=Gh(Wh),Jh=Gh(zh),Hh=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{checks:e}};function Zh(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Qh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Qh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var tv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Hh((function(t){var n,r=!1,o=[],i=Zh(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;"string"!=typeof a?(r=r||t instanceof a,o.push("an instance of ".concat(a.name))):(r=r||$h.default(t)===a,o.push("of type ".concat(a)))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))};function ev(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rv=Hh((function(t){return["string"==typeof t&&t.length>0,"a non-empty string"]})),ov=Hh((function(t){return["number"==typeof t&&Number.isInteger(t)&&t>=0,"a non-negative integer"]})),iv=Hh((function(t){return["object"===$h.default(t)&&null!==t&&!Array.isArray(t),"a pure object (non-null and non-array)"]}));function av(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jh.default(t);if(e){var o=Jh.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xh.default(this,n)}}function sv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return cv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function cv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var uv=function(t,e){if(e.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(e.length));for(;e.length<t.length;)e.push(void 0);var n,r=sv(e.entries());try{for(r.s();!(n=r.n()).done;){var o=Vh.default(n.value,2),i=o[0],a=o[1],s=pv(t[i],a),c=Vh.default(s,4),u=c[0],f=c[1],l=c[2],d=c[3];if(!u)throw new Error("Argument ".concat(i+1," is expected to be ").concat(l).concat(d," but got ").concat(f))}}catch(t){r.e(t)}finally{r.f()}},fv=function(t){var e,n,r;(["undefined","boolean","number","bigint","string"].includes($h.default(t))&&(n="string"==typeof t?'"'.concat(t,'"'):"".concat(t)),"object"===$h.default(t)&&"Object"!==(null==t||null===(e=t.constructor)||void 0===e?void 0:e.name))&&(n=null===t?"null":"instance of ".concat(null==t||null===(r=t.constructor)||void 0===r?void 0:r.name));return n||(n=$h.default(t)),n},lv=function(t){var e,n=[],r=sv(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(dv(o))}}catch(t){r.e(t)}finally{r.f()}return n},dv=function(t){var e,n=[],r=sv(Array.isArray(t)?t:[t]);try{for(r.s();!(e=r.n()).done;){var o=e.value;"string"!=typeof o&&"function"!=typeof o?n.push(o):n.push(tv(o))}}catch(t){r.e(t)}finally{r.f()}return n},pv=function(t,e){var n,r,o=[],i=!1,a=sv(t);try{for(a.s();!(r=a.n()).done;){var s,c=sv(r.value.checks);try{for(c.s();!(s=c.n()).done;){var u=(0,s.value)(e),f=Vh.default(u,3),l=f[0],d=f[1],p=f[2];i=i||l,!n&&p&&(n=p),d&&(o=[].concat(Kh.default(o),"string"==typeof d?[d]:Kh.default(d)))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}if(i)return[!0];var h=n||fv(e),v=o.length-1;return[!1,h,v>0?"".concat(o.slice(0,v).join(", ")," or ").concat(o[v]):o.join(", "),v>1?";":","]};function hv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return vv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function vv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Ll.array=function(t,e){return Hh((function(n){if(!Array.isArray(n))return[!1,"an array of ".concat(t)];var r,o=hv(n.entries());try{for(o.s();!(r=o.n()).done;){var i=Vh.default(r.value,2),a=i[0],s=i[1],c=pv(dv(e),s),u=Vh.default(c,3),f=u[0],l=u[1],d=u[2];if(!f)return[!1,"a valid array of ".concat(t," (index ").concat(a," should be ").concat(d,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(l,")")]}}catch(t){o.e(t)}finally{o.f()}return[!0]}))},Ll.custom=Hh;var yv=Ll.literal=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Hh((function(t){var n,r=!1,o=[],i=ev(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||t===a,o.push("string"==typeof a?'"'.concat(a,'"'):"".concat(a))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))},gv=Ll.nonEmptyString=rv;Ll.nonNegativeInteger=ov,Ll.objectSchema=function(t,e){return Hh((function(n){if("object"!==$h.default(n)||null===n||Array.isArray(n))return[!1,"valid ".concat(t," (should be a pure object)")];for(var r=0,o=Object.entries(e);r<o.length;r++){var i=Vh.default(o[r],2),a=i[0],s=i[1],c=pv(dv(s),n[a]),u=Vh.default(c,3),f=u[0],l=u[1],d=u[2];if(!f)return[!1,"valid ".concat(t,' (key "').concat(a,'" should be ').concat(d,")"),"malformed ".concat(t,' (key "').concat(a,'" is ').concat(l,")")]}return[!0]}))};var mv=Ll.pureObject=iv;Ll.runtimeTypeValidation=uv,Ll.stringifyReceivedType=fv,Ll.type=tv;var bv=Ll.validateConstructorTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=lv(e);return function(t){return function(t){Yh.default(n,t);var e=av(n);function n(){qh.default(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return uv(r,o),e.call.apply(e,[this].concat(o))}return n}(t)}},wv=Ll.validateTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=lv(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypes decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return uv(r,e),o.apply(this,e)}}},xv=Ll.validateTypesAsync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=lv(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypesAsync decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{uv(r,e)}catch(t){return Promise.reject(t)}return o.apply(this,e)}}},kv={exports:{}};!function(t){var n,r;n=e,r=function(){var t=function(){},e="undefined",n=("undefined"==typeof window?"undefined":wr(window))!==e&&wr(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),("undefined"==typeof console?"undefined":wr(console))!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}function s(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function c(t,n,r){return function(){("undefined"==typeof console?"undefined":wr(console))!==e&&(s.call(this,n,r),this[t].apply(this,arguments))}}function u(t,e,n){return a(t)||c.apply(this,arguments)}function f(t,n,o){var i,a=this,c="loglevel";function f(){var t;if(("undefined"==typeof window?"undefined":wr(window))!==e&&c){try{t=window.localStorage[c]}catch(t){}if(wr(t)===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?c+=":"+t:"symbol"===wr(t)&&(c=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||u,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":wr(window))!==e&&c){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}}(n),s.call(a,n,t),("undefined"==typeof console?"undefined":wr(console))===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){f()||a.setLevel(t,!1)},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var l=f();null==l&&(l=null==n?"WARN":n),a.setLevel(l,!1)}var l=new f,d={};l.getLogger=function(t){if("symbol"!==wr(t)&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new f(t,l.getLevel(),l.methodFactory)),e};var p=("undefined"==typeof window?"undefined":wr(window))!==e?window.log:void 0;return l.noConflict=function(){return("undefined"==typeof window?"undefined":wr(window))!==e&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return d},l.default=l,l},t.exports?t.exports=r():n.log=r()}(kv),Ra("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Xa);var Sv={exports:{}};!function(t,e){var n;n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=function(t,e){var n,r,o;for(n=1;n<arguments.length;n++)for(o in r=arguments[n])r.hasOwnProperty(o)&&(t[o]=r[o]);return t}},function(t,e,n){var r=n(0);t.exports={build:function(t,e){var n,o,i,a=e.plugins;for(n=0,o=a.length;n<o;n++)(i=a[n]).methods&&r(t,i.methods),i.properties&&Object.defineProperties(t,i.properties)},hook:function(t,e,n){var r,o,i,a,s=t.config.plugins,c=[t.context];for(n&&(c=c.concat(n)),r=0,o=s.length;r<o;r++)a=s[r],(i=s[r][e])&&i.apply(a,c)}}},function(t,e,n){function r(t){if(0===t.length)return t;var e,n,r=t.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return t;for(n=r[0].toLowerCase(),e=1;e<r.length;e++)n=n+r[e].charAt(0).toUpperCase()+r[e].substring(1).toLowerCase();return n}r.prepended=function(t,e){return t+(e=r(e))[0].toUpperCase()+e.substring(1)},t.exports=r},function(t,e,n){var r=n(0),o=n(2);function i(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}r(i.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=o.prepended("onEnter",t),this.lifecycle.onLeave[t]=o.prepended("onLeave",t),this.lifecycle.on[t]=o.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=o.prepended("onBefore",t),this.lifecycle.onAfter[t]=o.prepended("onAfter",t),this.lifecycle.on[t]=o.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,r=t.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(r({},this.defaults.init,{to:t,active:!0})):"object"===wr(t)?this.mapTransition(r({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"===wr(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,r,o;for(n=0,r=(t=t||[]).length;n<r;n++)"function"==typeof(o=t[n])&&(t[n]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var e,n,r,o,i,a=this.defaults.wildcard;for(n=0;n<t.length;n++)for(r=t[n],o=Array.isArray(r.from)?r.from:[r.from||a],i=r.to||a,e=0;e<o.length;e++)this.mapTransition({name:r.name,from:o[e],to:i})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=i},function(t,e,n){var r=n(0),o=n(6),i=n(1),a=[null,[]];function s(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}r(s.prototype,{init:function(t){if(r(this.context,this.config.data.apply(this.context,t)),i.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,t),o=r&&r.to;return"function"==typeof o?o.apply(this.context,e):o===n?this.state:o},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,r){var o=this.config.lifecycle,i=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),i?this.observersForEvent(o.onLeave.state):a,i?this.observersForEvent(o.onLeave[e]):a,this.observersForEvent(o.on.transition),i?["doTransit",[this]]:a,i?this.observersForEvent(o.onEnter.state):a,i?this.observersForEvent(o.onEnter[n]):a,i?this.observersForEvent(o.on[n]):a,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],r)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,r=this.observers.length,o=[];n<r;n++)(e=this.observers[n])[t]&&o.push(e);return[t,o,!0]},observeEvents:function(t,e,n,r){if(0===t.length)return this.endTransit(void 0===r||r);var o=t[0][0],a=t[0][1],s=t[0][2];if(e[0].event=o,o&&s&&o!==n&&i.hook(this,"lifecycle",e),0===a.length)return t.shift(),this.observeEvents(t,e,o,r);var c=a.shift(),u=c[o].apply(c,e);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,t,e,o)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(t,e,o,u)},onInvalidTransition:function(t,e,n){throw new o("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new o("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=s},function(t,e,n){var r=n(0),o=n(2),i=n(1),a=n(3),s=n(4),c={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function f(t){return l(this||{},t)}function l(t,e){return d(t,new a(e,f)),t._fsm(),t}function d(t,e){if("object"!==wr(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");i.build(t,e),Object.defineProperties(t,u),r(t,c),r(t,e.methods),e.allTransitions().forEach((function(e){t[o(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}})),t._fsm=function(){this._fsm=new s(this,e),this._fsm.init(arguments)}}f.version="3.0.1",f.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new a(e,f);return d(t.prototype,n),t.prototype._fsm.config=n,t},f.apply=l,f.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=f},function(t,e,n){t.exports=function(t,e,n,r,o){this.message=t,this.transition=e,this.from=n,this.to=r,this.current=o}}])},t.exports=n()}(Sv);var Tv={exports:{}},Ev="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Ev){var Ov=new Uint8Array(16);Tv.exports=function(){return Ev(Ov),Ov}}else{var _v=new Array(16);Tv.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),_v[e]=t>>>((3&e)<<3)&255;return _v}}for(var Av=[],Rv=0;Rv<256;++Rv)Av[Rv]=(Rv+256).toString(16).substr(1);var Cv,Iv,Pv=function(t,e){var n=e||0,r=Av;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},jv=Tv.exports,Lv=Pv,Mv=0,Nv=0;var Dv=function(t,e,n){var r=e&&n||0,o=e||[],i=(t=t||{}).node||Cv,a=void 0!==t.clockseq?t.clockseq:Iv;if(null==i||null==a){var s=jv();null==i&&(i=Cv=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Iv=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:Nv+1,f=c-Mv+(u-Nv)/1e4;if(f<0&&void 0===t.clockseq&&(a=a+1&16383),(f<0||c>Mv)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Mv=c,Nv=u,Iv=a;var l=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var d=c/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var p=0;p<6;++p)o[r+p]=i[p];return e||Lv(o)},Bv=Tv.exports,Fv=Pv;var Uv=Dv,Wv=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||Bv)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[r+i]=o[i];return e||Fv(o)},zv=Wv;zv.v1=Uv,zv.v4=Wv;var Gv=zv,$v={},Vv=a,Kv=o.RegExp;$v.UNSUPPORTED_Y=Vv((function(){var t=Kv("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),$v.BROKEN_CARET=Vv((function(){var t=Kv("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var qv,Yv,Xv=a,Jv=o.RegExp,Hv=Xv((function(){var t=Jv(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Zv=a,Qv=o.RegExp,ty=Zv((function(){var t=Qv("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),ey=ns,ny=gl,ry=$v,oy=G.exports,iy=Xn,ay=ke.get,sy=Hv,cy=ty,uy=RegExp.prototype.exec,fy=oy("native-string-replace",String.prototype.replace),ly=uy,dy=(qv=/a/,Yv=/b*/g,uy.call(qv,"a"),uy.call(Yv,"a"),0!==qv.lastIndex||0!==Yv.lastIndex),py=ry.UNSUPPORTED_Y||ry.BROKEN_CARET,hy=void 0!==/()??/.exec("")[1];(dy||hy||py||sy||cy)&&(ly=function(t){var e,n,r,o,i,a,s,c=this,u=ay(c),f=ey(t),l=u.raw;if(l)return l.lastIndex=c.lastIndex,e=ly.call(l,f),c.lastIndex=l.lastIndex,e;var d=u.groups,p=py&&c.sticky,h=ny.call(c),v=c.source,y=0,g=f;if(p&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=f.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==f.charAt(c.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,y++),n=new RegExp("^(?:"+v+")",h)),hy&&(n=new RegExp("^"+v+"$(?!\\s)",h)),dy&&(r=c.lastIndex),o=uy.call(p?n:c,g),p?o?(o.input=o.input.slice(y),o[0]=o[0].slice(y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:dy&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),hy&&o&&o.length>1&&fy.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=iy(null),i=0;i<d.length;i++)a[(s=d[i])[0]]=o[s[1]];return o});var vy=ly;An({target:"RegExp",proto:!0,forced:/./.exec!==vy},{exec:vy});var yy=qt.exports,gy=vy,my=a,by=pt,wy=Kt,xy=by("species"),ky=RegExp.prototype,Sy=function(t,e,n,r){var o=by(t),i=!my((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!my((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[xy]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||n){var s=/./[o],c=e(o,""[t],(function(t,e,n,r,o){var a=e.exec;return a===gy||a===ky.exec?i&&!o?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));yy(String.prototype,t,c[0]),yy(ky,o,c[1])}r&&wy(ky[o],"sham",!0)},Ty=ss.charAt,Ey=function(t,e,n){return e+(n?Ty(t,e).length:1)},Oy=H,_y=Math.floor,Ay="".replace,Ry=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Cy=/\$([$&'`]|\d{1,2})/g,Iy=y,Py=vy,jy=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Iy(t))throw TypeError("RegExp#exec called on incompatible receiver");return Py.call(t,e)},Ly=Sy,My=a,Ny=Bt,Dy=Le,By=De,Fy=ns,Uy=w,Wy=Ey,zy=function(t,e,n,r,o,i){var a=n+t.length,s=r.length,c=Cy;return void 0!==o&&(o=Oy(o),c=Ry),Ay.call(i,c,(function(i,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=o[c.slice(1,-1)];break;default:var f=+c;if(0===f)return i;if(f>s){var l=_y(f/10);return 0===l?i:l<=s?void 0===r[l-1]?c.charAt(1):r[l-1]+c.charAt(1):i}u=r[f-1]}return void 0===u?"":u}))},Gy=jy,$y=pt("replace"),Vy=Math.max,Ky=Math.min,qy="$0"==="a".replace(/./,"$0"),Yy=!!/./[$y]&&""===/./[$y]("a","$0");Ly("replace",(function(t,e,n){var r=Yy?"$":"$0";return[function(t,n){var r=Uy(this),o=null==t?void 0:t[$y];return void 0!==o?o.call(t,r,n):e.call(Fy(r),t,n)},function(t,o){var i=Ny(this),a=Fy(t);if("string"==typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var s=n(e,i,a,o);if(s.done)return s.value}var c="function"==typeof o;c||(o=Fy(o));var u=i.global;if(u){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var d=Gy(i,a);if(null===d)break;if(l.push(d),!u)break;""===Fy(d[0])&&(i.lastIndex=Wy(a,By(i.lastIndex),f))}for(var p,h="",v=0,y=0;y<l.length;y++){d=l[y];for(var g=Fy(d[0]),m=Vy(Ky(Dy(d.index),a.length),0),b=[],w=1;w<d.length;w++)b.push(void 0===(p=d[w])?p:String(p));var x=d.groups;if(c){var k=[g].concat(b,m,a);void 0!==x&&k.push(x);var S=Fy(o.apply(void 0,k))}else S=zy(g,a,m,b,x,o);m>=v&&(h+=a.slice(v,m)+S,v=m+g.length)}return h+a.slice(v)}]}),!!My((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!qy||Yy);var Xy,Jy,Hy,Zy={exports:{}},Qy="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,tg=Qy,eg=s,ng=o,rg=T,og=tt,ig=Gi,ag=Kt,sg=qt.exports,cg=Nt.f,ug=mo,fg=Bo,lg=pt,dg=rt,pg=ng.Int8Array,hg=pg&&pg.prototype,vg=ng.Uint8ClampedArray,yg=vg&&vg.prototype,gg=pg&&ug(pg),mg=hg&&ug(hg),bg=Object.prototype,wg=bg.isPrototypeOf,xg=lg("toStringTag"),kg=dg("TYPED_ARRAY_TAG"),Sg=dg("TYPED_ARRAY_CONSTRUCTOR"),Tg=tg&&!!fg&&"Opera"!==ig(ng.opera),Eg=!1,Og={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},_g={BigInt64Array:8,BigUint64Array:8},Ag=function(t){if(!rg(t))return!1;var e=ig(t);return og(Og,e)||og(_g,e)};for(Xy in Og)(Hy=(Jy=ng[Xy])&&Jy.prototype)?ag(Hy,Sg,Jy):Tg=!1;for(Xy in _g)(Hy=(Jy=ng[Xy])&&Jy.prototype)&&ag(Hy,Sg,Jy);if((!Tg||"function"!=typeof gg||gg===Function.prototype)&&(gg=function(){throw TypeError("Incorrect invocation")},Tg))for(Xy in Og)ng[Xy]&&fg(ng[Xy],gg);if((!Tg||!mg||mg===bg)&&(mg=gg.prototype,Tg))for(Xy in Og)ng[Xy]&&fg(ng[Xy].prototype,mg);if(Tg&&ug(yg)!==mg&&fg(yg,mg),eg&&!og(mg,xg))for(Xy in Eg=!0,cg(mg,xg,{get:function(){return rg(this)?this[kg]:void 0}}),Og)ng[Xy]&&ag(ng[Xy],kg,Xy);var Rg={NATIVE_ARRAY_BUFFER_VIEWS:Tg,TYPED_ARRAY_CONSTRUCTOR:Sg,TYPED_ARRAY_TAG:Eg&&kg,aTypedArray:function(t){if(Ag(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(fg&&!wg.call(gg,t))throw TypeError("Target is not a typed array constructor");return t},exportTypedArrayMethod:function(t,e,n){if(eg){if(n)for(var r in Og){var o=ng[r];if(o&&og(o.prototype,t))try{delete o.prototype[t]}catch(t){}}mg[t]&&!n||sg(mg,t,n?e:Tg&&hg[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(eg){if(fg){if(n)for(r in Og)if((o=ng[r])&&og(o,t))try{delete o[t]}catch(t){}if(gg[t]&&!n)return;try{return sg(gg,t,n?e:Tg&&gg[t]||e)}catch(t){}}for(r in Og)!(o=ng[r])||o[t]&&!n||sg(o,t,e)}},isView:function(t){if(!rg(t))return!1;var e=ig(t);return"DataView"===e||og(Og,e)||og(_g,e)},isTypedArray:Ag,TypedArray:gg,TypedArrayPrototype:mg},Cg=o,Ig=a,Pg=pa,jg=Rg.NATIVE_ARRAY_BUFFER_VIEWS,Lg=Cg.ArrayBuffer,Mg=Cg.Int8Array,Ng=!jg||!Ig((function(){Mg(1)}))||!Ig((function(){new Mg(-1)}))||!Pg((function(t){new Mg,new Mg(null),new Mg(1.5),new Mg(t)}),!0)||Ig((function(){return 1!==new Mg(new Lg(2),1,void 0).length})),Dg=Le,Bg=De,Fg=function(t){if(void 0===t)return 0;var e=Dg(t),n=Bg(e);if(e!==n)throw RangeError("Wrong length or index");return n},Ug=Math.abs,Wg=Math.pow,zg=Math.floor,Gg=Math.log,$g=Math.LN2,Vg=H,Kg=We,qg=De,Yg=function(t){for(var e=Vg(this),n=qg(e.length),r=arguments.length,o=Kg(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,a=void 0===i?n:Kg(i,n);a>o;)e[o++]=t;return e},Xg=o,Jg=s,Hg=Qy,Zg=Kt,Qg=Ia,tm=a,em=ca,nm=Le,rm=De,om=Fg,im={pack:function(t,e,n){var r,o,i,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,f=23===e?Wg(2,-24)-Wg(2,-77):0,l=t<0||0===t&&1/t<0?1:0,d=0;for((t=Ug(t))!=t||t===1/0?(o=t!=t?1:0,r=c):(r=zg(Gg(t)/$g),t*(i=Wg(2,-r))<1&&(r--,i*=2),(t+=r+u>=1?f/i:f*Wg(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(t*i-1)*Wg(2,e),r+=u):(o=t*Wg(2,u-1)*Wg(2,e),r=0));e>=8;a[d++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*l,a},unpack:function(t,e){var n,r=t.length,o=8*r-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=r-1,u=t[c--],f=127&u;for(u>>=7;s>0;f=256*f+t[c],c--,s-=8);for(n=f&(1<<-s)-1,f>>=-s,s+=e;s>0;n=256*n+t[c],c--,s-=8);if(0===f)f=1-a;else{if(f===i)return n?NaN:u?-1/0:1/0;n+=Wg(2,e),f-=a}return(u?-1:1)*n*Wg(2,f-e)}},am=mo,sm=Bo,cm=Ie.f,um=Nt.f,fm=Yg,lm=Ao,dm=ke.get,pm=ke.set,hm="ArrayBuffer",vm="DataView",ym="Wrong index",gm=Xg.ArrayBuffer,mm=gm,bm=Xg.DataView,wm=bm&&bm.prototype,xm=Object.prototype,km=Xg.RangeError,Sm=im.pack,Tm=im.unpack,Em=function(t){return[255&t]},Om=function(t){return[255&t,t>>8&255]},_m=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Am=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Rm=function(t){return Sm(t,23,4)},Cm=function(t){return Sm(t,52,8)},Im=function(t,e){um(t.prototype,e,{get:function(){return dm(this)[e]}})},Pm=function(t,e,n,r){var o=om(n),i=dm(t);if(o+e>i.byteLength)throw km(ym);var a=dm(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+e);return r?c:c.reverse()},jm=function(t,e,n,r,o,i){var a=om(n),s=dm(t);if(a+e>s.byteLength)throw km(ym);for(var c=dm(s.buffer).bytes,u=a+s.byteOffset,f=r(+o),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]};if(Hg){if(!tm((function(){gm(1)}))||!tm((function(){new gm(-1)}))||tm((function(){return new gm,new gm(1.5),new gm(NaN),gm.name!=hm}))){for(var Lm,Mm=(mm=function(t){return em(this,mm),new gm(om(t))}).prototype=gm.prototype,Nm=cm(gm),Dm=0;Nm.length>Dm;)(Lm=Nm[Dm++])in mm||Zg(mm,Lm,gm[Lm]);Mm.constructor=mm}sm&&am(wm)!==xm&&sm(wm,xm);var Bm=new bm(new mm(2)),Fm=wm.setInt8;Bm.setInt8(0,2147483648),Bm.setInt8(1,2147483649),!Bm.getInt8(0)&&Bm.getInt8(1)||Qg(wm,{setInt8:function(t,e){Fm.call(this,t,e<<24>>24)},setUint8:function(t,e){Fm.call(this,t,e<<24>>24)}},{unsafe:!0})}else mm=function(t){em(this,mm,hm);var e=om(t);pm(this,{bytes:fm.call(new Array(e),0),byteLength:e}),Jg||(this.byteLength=e)},bm=function(t,e,n){em(this,bm,vm),em(t,mm,vm);var r=dm(t).byteLength,o=nm(e);if(o<0||o>r)throw km("Wrong offset");if(o+(n=void 0===n?r-o:rm(n))>r)throw km("Wrong length");pm(this,{buffer:t,byteLength:n,byteOffset:o}),Jg||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},Jg&&(Im(mm,"byteLength"),Im(bm,"buffer"),Im(bm,"byteLength"),Im(bm,"byteOffset")),Qg(bm.prototype,{getInt8:function(t){return Pm(this,1,t)[0]<<24>>24},getUint8:function(t){return Pm(this,1,t)[0]},getInt16:function(t){var e=Pm(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Pm(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Am(Pm(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Am(Pm(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Tm(Pm(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Tm(Pm(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){jm(this,1,t,Em,e)},setUint8:function(t,e){jm(this,1,t,Em,e)},setInt16:function(t,e){jm(this,2,t,Om,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){jm(this,2,t,Om,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){jm(this,4,t,_m,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){jm(this,4,t,_m,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){jm(this,4,t,Rm,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){jm(this,8,t,Cm,e,arguments.length>2?arguments[2]:void 0)}});lm(mm,hm),lm(bm,vm);var Um=Le,Wm=function(t){var e=Um(t);if(e<0)throw RangeError("The argument can't be less than 0");return e},zm=function(t,e){var n=Wm(t);if(n%e)throw RangeError("Wrong offset");return n},Gm=H,$m=De,Vm=Ji,Km=qi,qm=Li,Ym=Ni,Xm=Rg.aTypedArrayConstructor,Jm=An,Hm=o,Zm=s,Qm=Ng,tb=Rg,eb={ArrayBuffer:mm,DataView:bm},nb=ca,rb=h,ob=Kt,ib=Wp,ab=De,sb=Fg,cb=zm,ub=xt,fb=tt,lb=Gi,db=T,pb=W,hb=Xn,vb=Bo,yb=Ie.f,gb=function(t){var e,n,r,o,i,a,s=Gm(t),c=arguments.length,u=c>1?arguments[1]:void 0,f=void 0!==u,l=Km(s);if(null!=l&&!qm(l))for(a=(i=Vm(s,l)).next,s=[];!(o=a.call(i)).done;)s.push(o.value);for(f&&c>2&&(u=Ym(u,arguments[2],2)),n=$m(s.length),r=new(Xm(this))(n),e=0;n>e;e++)r[e]=f?u(s[e],e):s[e];return r},mb=hc.forEach,bb=Na,wb=Nt,xb=i,kb=ya,Sb=ke.get,Tb=ke.set,Eb=wb.f,Ob=xb.f,_b=Math.round,Ab=Hm.RangeError,Rb=eb.ArrayBuffer,Cb=eb.DataView,Ib=tb.NATIVE_ARRAY_BUFFER_VIEWS,Pb=tb.TYPED_ARRAY_CONSTRUCTOR,jb=tb.TYPED_ARRAY_TAG,Lb=tb.TypedArray,Mb=tb.TypedArrayPrototype,Nb=tb.aTypedArrayConstructor,Db=tb.isTypedArray,Bb="BYTES_PER_ELEMENT",Fb="Wrong length",Ub=function(t,e){for(var n=0,r=e.length,o=new(Nb(t))(r);r>n;)o[n]=e[n++];return o},Wb=function(t,e){Eb(t,e,{get:function(){return Sb(this)[e]}})},zb=function(t){var e;return t instanceof Rb||"ArrayBuffer"==(e=lb(t))||"SharedArrayBuffer"==e},Gb=function(t,e){return Db(t)&&!pb(e)&&e in t&&ib(+e)&&e>=0},$b=function(t,e){return e=ub(e),Gb(t,e)?rb(2,t[e]):Ob(t,e)},Vb=function(t,e,n){return e=ub(e),!(Gb(t,e)&&db(n)&&fb(n,"value"))||fb(n,"get")||fb(n,"set")||n.configurable||fb(n,"writable")&&!n.writable||fb(n,"enumerable")&&!n.enumerable?Eb(t,e,n):(t[e]=n.value,t)};Zm?(Ib||(xb.f=$b,wb.f=Vb,Wb(Mb,"buffer"),Wb(Mb,"byteOffset"),Wb(Mb,"byteLength"),Wb(Mb,"length")),Jm({target:"Object",stat:!0,forced:!Ib},{getOwnPropertyDescriptor:$b,defineProperty:Vb}),Zy.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,o=t+(n?"Clamped":"")+"Array",i="get"+t,a="set"+t,s=Hm[o],c=s,u=c&&c.prototype,f={},l=function(t,e){Eb(t,e,{get:function(){return function(t,e){var n=Sb(t);return n.view[i](e*r+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,o){var i=Sb(t);n&&(o=(o=_b(o))<0?0:o>255?255:255&o),i.view[a](e*r+i.byteOffset,o,!0)}(this,e,t)},enumerable:!0})};Ib?Qm&&(c=e((function(t,e,n,i){return nb(t,c,o),kb(db(e)?zb(e)?void 0!==i?new s(e,cb(n,r),i):void 0!==n?new s(e,cb(n,r)):new s(e):Db(e)?Ub(c,e):gb.call(c,e):new s(sb(e)),t,c)})),vb&&vb(c,Lb),mb(yb(s),(function(t){t in c||ob(c,t,s[t])})),c.prototype=u):(c=e((function(t,e,n,i){nb(t,c,o);var a,s,u,f=0,d=0;if(db(e)){if(!zb(e))return Db(e)?Ub(c,e):gb.call(c,e);a=e,d=cb(n,r);var p=e.byteLength;if(void 0===i){if(p%r)throw Ab(Fb);if((s=p-d)<0)throw Ab(Fb)}else if((s=ab(i)*r)+d>p)throw Ab(Fb);u=s/r}else u=sb(e),a=new Rb(s=u*r);for(Tb(t,{buffer:a,byteOffset:d,byteLength:s,length:u,view:new Cb(a)});f<u;)l(t,f++)})),vb&&vb(c,Lb),u=c.prototype=hb(Mb)),u.constructor!==c&&ob(u,"constructor",c),ob(u,Pb,c),jb&&ob(u,jb,o),f[o]=c,Jm({global:!0,forced:c!=s,sham:!Ib},f),Bb in c||ob(c,Bb,r),Bb in u||ob(u,Bb,r),bb(o)}):Zy.exports=function(){},(0,Zy.exports)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Kb=H,qb=We,Yb=De,Xb=Math.min,Jb=[].copyWithin||function(t,e){var n=Kb(this),r=Yb(n.length),o=qb(t,r),i=qb(e,r),a=arguments.length>2?arguments[2]:void 0,s=Xb((void 0===a?r:qb(a,r))-i,r-o),c=1;for(i<o&&o<i+s&&(c=-1,i+=s-1,o+=s-1);s-- >0;)i in n?n[o]=n[i]:delete n[o],o+=c,i+=c;return n},Hb=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("copyWithin",(function(t,e){return Jb.call(Hb(this),t,e,arguments.length>2?arguments[2]:void 0)}));var Zb=hc.every,Qb=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("every",(function(t){return Zb(Qb(this),t,arguments.length>1?arguments[1]:void 0)}));var tw=Yg,ew=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("fill",(function(t){return tw.apply(ew(this),arguments)}));var nw=jc,rw=Rg.TYPED_ARRAY_CONSTRUCTOR,ow=Rg.aTypedArrayConstructor,iw=function(t){return ow(nw(t,t[rw]))},aw=function(t,e){for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},sw=iw,cw=hc.filter,uw=function(t,e){return aw(sw(t),e)},fw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("filter",(function(t){var e=cw(fw(this),t,arguments.length>1?arguments[1]:void 0);return uw(this,e)}));var lw=hc.find,dw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("find",(function(t){return lw(dw(this),t,arguments.length>1?arguments[1]:void 0)}));var pw=hc.findIndex,hw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("findIndex",(function(t){return pw(hw(this),t,arguments.length>1?arguments[1]:void 0)}));var vw=hc.forEach,yw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("forEach",(function(t){vw(yw(this),t,arguments.length>1?arguments[1]:void 0)}));var gw=Ke.includes,mw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("includes",(function(t){return gw(mw(this),t,arguments.length>1?arguments[1]:void 0)}));var bw=Ke.indexOf,ww=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("indexOf",(function(t){return bw(ww(this),t,arguments.length>1?arguments[1]:void 0)}));var xw=o,kw=Rg,Sw=ui,Tw=pt("iterator"),Ew=xw.Uint8Array,Ow=Sw.values,_w=Sw.keys,Aw=Sw.entries,Rw=kw.aTypedArray,Cw=kw.exportTypedArrayMethod,Iw=Ew&&Ew.prototype[Tw],Pw=!!Iw&&("values"==Iw.name||null==Iw.name),jw=function(){return Ow.call(Rw(this))};Cw("entries",(function(){return Aw.call(Rw(this))})),Cw("keys",(function(){return _w.call(Rw(this))})),Cw("values",jw,!Pw),Cw(Tw,jw,!Pw);var Lw=Rg.aTypedArray,Mw=[].join;(0,Rg.exportTypedArrayMethod)("join",(function(t){return Mw.apply(Lw(this),arguments)}));var Nw=S,Dw=Le,Bw=De,Fw=yc,Uw=Math.min,Ww=[].lastIndexOf,zw=!!Ww&&1/[1].lastIndexOf(1,-0)<0,Gw=Fw("lastIndexOf"),$w=zw||!Gw?function(t){if(zw)return Ww.apply(this,arguments)||0;var e=Nw(this),n=Bw(e.length),r=n-1;for(arguments.length>1&&(r=Uw(r,Dw(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Ww,Vw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("lastIndexOf",(function(t){return $w.apply(Vw(this),arguments)}));var Kw=hc.map,qw=iw,Yw=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("map",(function(t){return Kw(Yw(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(qw(t))(e)}))}));var Xw=Rn,Jw=H,Hw=b,Zw=De,Qw=function(t){return function(e,n,r,o){Xw(n);var i=Jw(e),a=Hw(i),s=Zw(i.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(o=n(o,a[c],c,i));return o}},tx={left:Qw(!1),right:Qw(!0)},ex=tx.left,nx=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("reduce",(function(t){return ex(nx(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var rx=tx.right,ox=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("reduceRight",(function(t){return rx(ox(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var ix=Rg.aTypedArray,ax=Rg.exportTypedArrayMethod,sx=Math.floor;ax("reverse",(function(){for(var t,e=this,n=ix(e).length,r=sx(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e}));var cx=De,ux=zm,fx=H,lx=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("set",(function(t){lx(this);var e=ux(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=fx(t),o=cx(r.length),i=0;if(o+e>n)throw RangeError("Wrong length");for(;i<o;)this[e+i]=r[i++]}),a((function(){new Int8Array(1).set({})})));var dx=iw,px=Rg.aTypedArray,hx=[].slice;(0,Rg.exportTypedArrayMethod)("slice",(function(t,e){for(var n=hx.call(px(this),t,e),r=dx(this),o=0,i=n.length,a=new r(i);i>o;)a[o]=n[o++];return a}),a((function(){new Int8Array(1).slice()})));var vx=hc.some,yx=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("some",(function(t){return vx(yx(this),t,arguments.length>1?arguments[1]:void 0)}));var gx=Math.floor,mx=function(t,e){var n=t.length,r=gx(n/2);return n<8?bx(t,e):wx(mx(t.slice(0,r),e),mx(t.slice(r),e),e)},bx=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},wx=function(t,e,n){for(var r=t.length,o=e.length,i=0,a=0,s=[];i<r||a<o;)i<r&&a<o?s.push(n(t[i],e[a])<=0?t[i++]:e[a++]):s.push(i<r?t[i++]:e[a++]);return s},xx=mx,kx=A.match(/firefox\/(\d+)/i),Sx=!!kx&&+kx[1],Tx=/MSIE|Trident/.test(A),Ex=A.match(/AppleWebKit\/(\d+)\./),Ox=!!Ex&&+Ex[1],_x=a,Ax=Rn,Rx=De,Cx=xx,Ix=Sx,Px=Tx,jx=M,Lx=Ox,Mx=Rg.aTypedArray,Nx=Rg.exportTypedArrayMethod,Dx=o.Uint16Array,Bx=Dx&&Dx.prototype.sort,Fx=!!Bx&&!_x((function(){var t=new Dx(2);t.sort(null),t.sort({})})),Ux=!!Bx&&!_x((function(){if(jx)return jx<74;if(Ix)return Ix<67;if(Px)return!0;if(Lx)return Lx<602;var t,e,n=new Dx(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(n.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));Nx("sort",(function(t){var e=this;if(void 0!==t&&Ax(t),Ux)return Bx.call(e,t);Mx(e);var n,r=Rx(e.length),o=Array(r);for(n=0;n<r;n++)o[n]=e[n];for(o=Cx(e,function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t)),n=0;n<r;n++)e[n]=o[n];return e}),!Ux||Fx);var Wx=De,zx=We,Gx=iw,$x=Rg.aTypedArray;(0,Rg.exportTypedArrayMethod)("subarray",(function(t,e){var n=$x(this),r=n.length,o=zx(t,r);return new(Gx(n))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,Wx((void 0===e?r:zx(e,r))-o))}));var Vx=Rg,Kx=a,qx=o.Int8Array,Yx=Vx.aTypedArray,Xx=Vx.exportTypedArrayMethod,Jx=[].toLocaleString,Hx=[].slice,Zx=!!qx&&Kx((function(){Jx.call(new qx(1))}));Xx("toLocaleString",(function(){return Jx.apply(Zx?Hx.call(Yx(this)):Yx(this),arguments)}),Kx((function(){return[1,2].toLocaleString()!=new qx([1,2]).toLocaleString()}))||!Kx((function(){qx.prototype.toLocaleString.call([1,2])})));var Qx=Rg.exportTypedArrayMethod,tk=a,ek=o.Uint8Array,nk=ek&&ek.prototype||{},rk=[].toString,ok=[].join;tk((function(){rk.call({})}))&&(rk=function(){return ok.call(this)});var ik=nk.toString!=rk;Qx("toString",rk,ik);var ak=T,sk=y,ck=pt("match"),uk=Sy,fk=function(t){var e;return ak(t)&&(void 0!==(e=t[ck])?!!e:"RegExp"==sk(t))},lk=Bt,dk=w,pk=jc,hk=Ey,vk=De,yk=ns,gk=jy,mk=vy,bk=a,wk=$v.UNSUPPORTED_Y,xk=[].push,kk=Math.min,Sk=4294967295;uk("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=yk(dk(this)),o=void 0===n?Sk:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!fk(t))return e.call(r,t,o);for(var i,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,l=new RegExp(t.source,u+"g");(i=mk.call(l,r))&&!((a=l.lastIndex)>f&&(c.push(r.slice(f,i.index)),i.length>1&&i.index<r.length&&xk.apply(c,i.slice(1)),s=i[0].length,f=a,c.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!s&&l.test("")||c.push(""):c.push(r.slice(f)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=dk(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(yk(o),e,n)},function(t,o){var i=lk(this),a=yk(t),s=n(r,i,a,o,r!==e);if(s.done)return s.value;var c=pk(i,RegExp),u=i.unicode,f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(wk?"g":"y"),l=new c(wk?"^(?:"+i.source+")":i,f),d=void 0===o?Sk:o>>>0;if(0===d)return[];if(0===a.length)return null===gk(l,a)?[a]:[];for(var p=0,h=0,v=[];h<a.length;){l.lastIndex=wk?0:h;var y,g=gk(l,wk?a.slice(h):a);if(null===g||(y=kk(vk(l.lastIndex+(wk?h:0)),a.length))===p)h=hk(a,h,u);else{if(v.push(a.slice(p,h)),v.length===d)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===d)return v;h=p=y}}return v.push(a.slice(p)),v}]}),!!bk((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),wk);var Tk={exports:{}},Ek={exports:{}};!function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.default=t.exports,t.exports.__esModule=!0}(Ek);var Ok={exports:{}},_k={exports:{}};!function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0}(_k),function(t){var e=fl.exports,n=_k.exports;function r(o,i,a){return n()?(t.exports=r=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(t,o));return r&&e(i,r.prototype),i},t.exports.default=t.exports,t.exports.__esModule=!0),r.apply(null,arguments)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0}(Ok),function(t){var e=cl.exports,n=fl.exports,r=Ek.exports,o=Ok.exports;function i(a){var s="function"==typeof Map?new Map:void 0;return t.exports=i=function(t){if(null===t||!r(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==s){if(s.has(t))return s.get(t);s.set(t,i)}function i(){return o(t,arguments,e(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,t)},t.exports.default=t.exports,t.exports.__esModule=!0,i(a)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0}(Tk);var Ak=H,Rk=Pn;An({target:"Object",stat:!0,forced:a((function(){Rk(1)}))},{keys:function(t){return Rk(Ak(t))}});var Ck=hc.filter;An({target:"Array",proto:!0,forced:!$s("filter")},{filter:function(t){return Ck(this,t,arguments.length>1?arguments[1]:void 0)}});var Ik=An,Pk=a,jk=S,Lk=i.f,Mk=s,Nk=Pk((function(){Lk(1)}));Ik({target:"Object",stat:!0,forced:!Mk||Nk,sham:!Mk},{getOwnPropertyDescriptor:function(t,e){return Lk(jk(t),e)}});var Dk=sn,Bk=S,Fk=i,Uk=Ms;An({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,n,r=Bk(t),o=Fk.f,i=Dk(r),a={},s=0;i.length>s;)void 0!==(n=o(r,e=i[s++]))&&Uk(a,e,n);return a}});var Wk={};Object.defineProperty(Wk,"__esModule",{value:!0});var zk=rl.exports,Gk=il.exports,$k=ul.exports,Vk=ll.exports,Kk=cl.exports,qk=hl.exports;function Yk(t){return t&&"object"===wr(t)&&"default"in t?t:{default:t}}var Xk=Yk(pl.exports),Jk=Yk(zk),Hk=Yk(Gk),Zk=Yk($k),Qk=Yk(Vk),tS=Yk(Kk),eS=Yk(qk);function nS(){}function rS(){rS.init.call(this)}function oS(t){return void 0===t._maxListeners?rS.defaultMaxListeners:t._maxListeners}function iS(t,e,n){if(e)t.call(n);else for(var r=t.length,o=pS(t,r),i=0;i<r;++i)o[i].call(n)}function aS(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=pS(t,o),a=0;a<o;++a)i[a].call(n,r)}function sS(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=pS(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function cS(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=pS(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function uS(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=pS(t,o),a=0;a<o;++a)i[a].apply(n,r)}function fS(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new nS,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=oS(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function lS(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function dS(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function pS(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function hS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tS.default(t);if(e){var o=tS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qk.default(this,n)}}nS.prototype=Object.create(null),rS.EventEmitter=rS,rS.usingDomains=!1,rS.prototype.domain=void 0,rS.prototype._events=void 0,rS.prototype._maxListeners=void 0,rS.defaultMaxListeners=10,rS.init=function(){this.domain=null,rS.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new nS,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},rS.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},rS.prototype.getMaxListeners=function(){return oS(this)},rS.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:iS(n,f,this);break;case 2:aS(n,f,this,arguments[1]);break;case 3:sS(n,f,this,arguments[1],arguments[2]);break;case 4:cS(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];uS(n,f,this,o)}return!0},rS.prototype.addListener=function(t,e){return fS(this,t,e,!1)},rS.prototype.on=rS.prototype.addListener,rS.prototype.prependListener=function(t,e){return fS(this,t,e,!0)},rS.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,lS(this,t,e)),this},rS.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,lS(this,t,e)),this},rS.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new nS:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new nS,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},rS.prototype.off=function(t,e){return this.removeListener(t,e)},rS.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new nS,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new nS:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new nS,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},rS.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},rS.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):dS.call(t,e)},rS.prototype.listenerCount=dS,rS.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var vS=function(t){Zk.default(n,t);var e=hS(n);function n(t){var r;return Xk.default(this,n),r=e.call(this),eS.default(Hk.default(r),"timeout",null),eS.default(Hk.default(r),"startTimestamp",-1),r.minDelay=t.min,r.maxDelay=t.max,r.initialDelay=t.initial||0,r.maxAttemptsCount=t.maxAttemptsCount||0,r.maxAttemptsTime=t.maxAttemptsTime||0,r.randomness=t.randomness||0,r.inProgress=!1,r.attemptNum=0,r.prevDelay=0,r.currDelay=0,r}return Jk.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t,t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var e=this.currDelay+this.prevDelay;return this.maxDelay&&e>this.maxDelay&&(this.currDelay=this.maxDelay,e=this.maxDelay),this.currDelay=e,e}},{key:"randomize",value:function(t){var e=t*this.randomness,n=Math.round(Math.random()*e*2-e);return Math.max(0,t+n)}},{key:"scheduleAttempt",value:function(t){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt count limit reached"));var n=this.nextDelay(t);if(n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt time limit reached"));this.timeout=setTimeout((function(){return e.attempt()}),n)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(t){this.emit("succeeded",t)}},{key:"failed",value:function(t,e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(e)}}]),n}(rS),yS=function(t){Zk.default(n,t);var e=hS(n);function n(t){var r;return Xk.default(this,n),r=e.call(this),eS.default(Hk.default(r),"resolve",(function(){})),eS.default(Hk.default(r),"reject",(function(){})),r.retrier=new vS(t),r}return Jk.default(n,[{key:"run",value:function(t){var e=this;return this.retrier.on("attempt",(function(){t().then((function(t){return e.retrier.succeeded(t)})).catch((function(t){return e.retrier.failed(t)}))})),this.retrier.on("succeeded",(function(t){return e.resolve(t)})),this.retrier.on("cancelled",(function(){return e.reject(new Error("Cancelled"))})),this.retrier.on("failed",(function(t){return e.reject(t)})),new Promise((function(t,n){e.resolve=t,e.reject=n,e.retrier.start()}))}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(rS);function gS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tS.default(t);if(e){var o=tS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qk.default(this,n)}}function mS(t){return null!=t}var bS=function(t){Zk.default(n,t);var e=gS(n);function n(t){var r;Xk.default(this,n),r=e.call(this),eS.default(Hk.default(r),"backoffDelay",0),eS.default(Hk.default(r),"nextBackoffDelay",0),eS.default(Hk.default(r),"backoffNumber",0),eS.default(Hk.default(r),"timeoutID",null),eS.default(Hk.default(r),"maxNumberOfRetry",-1);var o=t=t||{},i=o.initialDelay,a=o.maxDelay,s=o.randomisationFactor,c=o.factor;if(mS(i)&&i<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(mS(a)&&a<=1)throw new Error("The maximal timeout must be greater than 1.");if(mS(s)&&(s<0||s>1))throw new Error("The randomisation factor must be between 0 and 1.");if(mS(c)&&c<=1)throw new Error("Exponential factor should be greater than 1.");if(r.initialDelay=i||100,r.maxDelay=a||1e4,r.maxDelay<=r.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return r.randomisationFactor=s||0,r.factor=c||2,r.reset(),r}return Jk.default(n,[{key:"backoff",value:function(t){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",t),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,t)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(t){if(t<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(t));this.maxNumberOfRetry=t}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var t=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*t))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(t){return new n(t)}}]),n}(rS),wS=Wk.AsyncRetrier=yS;Wk.Backoff=bS,Wk.Retrier=vS;var xS={exports:{}};!function(t,n){(function(){var r={function:!0,object:!0}["undefined"==typeof window?"undefined":wr(window)]&&window||this,o=n,i=t&&!t.nodeType&&t,a=o&&i&&"object"==wr(e)&&e;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s=Math.pow(2,53)-1,c=/\bOpera/,u=Object.prototype,f=u.hasOwnProperty,l=u.toString;function d(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function p(t){return t=m(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:d(t)}function h(t,e){for(var n in t)f.call(t,n)&&e(t[n],n,t)}function v(t){return null==t?d(t):l.call(t).slice(8,-1)}function y(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function g(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=s)for(;++n<r;)e(t[n],n,t);else h(t,e)}(t,(function(r,o){n=e(n,r,o,t)})),n}function m(t){return String(t).replace(/^ +| +$/g,"")}var b=function t(e){var n=r,o=e&&"object"==wr(e)&&"String"!=v(e);o&&(n=e,e=null);var i=n.navigator||{},a=i.userAgent||"";e||(e=a);var s,u,f=o?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(l.toString()),d="Object",b=o?d:"ScriptBridgingProxyObject",w=o?d:"Environment",x=o&&n.java?"JavaPackage":v(n.java),k=o?d:"RuntimeObject",S=/\bJava/.test(x)&&n.java,T=S&&v(n.environment)==w,E=S?"a":"Î±",O=S?"b":"Î²",_=n.document||{},A=n.operamini||n.opera,R=c.test(R=o&&A?A["[[Class]]"]:v(A))?R:A=null,C=e,I=[],P=null,j=e==a,L=j&&A&&"function"==typeof A.version&&A.version(),M=g([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)})),N=function(t){return g(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),D=U([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=function(t){return g(t,(function(t,n,r){return t||(n[D]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),F=function(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),p(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function U(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=p(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function W(t){return g(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(M&&(M=[M]),/\bAndroid\b/.test(F)&&!D&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(D=m(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!D?D=U([B]):B&&D&&(D=D.replace(RegExp("^("+y(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+y(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(D))&&(D=s[0]),/\bSimulator\b/i.test(e)&&(D=(D?D+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(e)&&I.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(e)?(B=(s=t(e.replace(/like iPhone OS/,""))).manufacturer,D=s.product):/^iP/.test(D)?(N||(N="Safari"),F="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==N&&/^Linux\b/i.test(F)?F="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(D))||/\bAndroid\b/.test(F)&&/^Chrome/.test(N)&&/\bVersion\//i.test(e)?(N="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==N?(/\bMobi/i.test(e)||(F="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&I.unshift("accelerated")):"UC Browser"==N&&/\bUCWEB\b/.test(e)?I.push("speed mode"):"PaleMoon"==N&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?I.push("identifying as Firefox "+s[1]):"Firefox"==N&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(F||(F="Firefox OS"),D||(D=s[1])):!N||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!D&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(N=null),(s=D||B||F)&&(D||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:s)+" Browser")):"Electron"==N&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&I.push("Chromium "+s),L||(L=W(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(N),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==M&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(e)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(M=[s]),"IE"==N&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(N+=" Mobile",F="Windows Phone "+(/\+$/.test(s)?s:s+".x"),I.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(N="IE Mobile",F="Windows Phone 8.x",I.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=N&&"Trident"==M&&(s=/\brv:([\d.]+)/.exec(e))&&(N&&I.push("identifying as "+N+(L?" "+L:"")),N="IE",L=s[1]),j){if(function(t,e){var n=null!=t?wr(t[e]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}(n,"global"))if(S&&(C=(s=S.lang.System).getProperty("os.arch"),F=F||s.getProperty("os.name")+" "+s.getProperty("os.version")),T){try{L=n.require("ringo/engine").version.join("."),N="RingoJS"}catch(t){(s=n.system)&&s.global.system==n.system&&(N="Narwhal",F||(F=s[0].os||null))}N||(N="Rhino")}else"object"==wr(n.process)&&!n.process.browser&&(s=n.process)&&("object"==wr(s.versions)&&("string"==typeof s.versions.electron?(I.push("Node "+s.versions.node),N="Electron",L=s.versions.electron):"string"==typeof s.versions.nw&&(I.push("Chromium "+L,"Node "+s.versions.node),N="NW.js",L=s.versions.nw)),N||(N="Node.js",C=s.arch,F=s.platform,L=(L=/[\d.]+/.exec(s.version))?L[0]:null));else v(s=n.runtime)==b?(N="Adobe AIR",F=s.flash.system.Capabilities.os):v(s=n.phantom)==k?(N="PhantomJS",L=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof _.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(L=[L,_.documentMode],(s=+s[1]+4)!=L[1]&&(I.push("IE "+L[1]+" mode"),M&&(M[1]=""),L[1]=s),L="IE"==N?String(L[1].toFixed(1)):L[0]):"number"==typeof _.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(I.push("masking as "+N+" "+L),N="IE",L="11.0",M=["Trident"],F="Windows");F=F&&p(F)}if(L&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(j&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(P=/b/i.test(s)?"beta":"alpha",L=L.replace(RegExp(s+"\\+?$"),"")+("beta"==P?O:E)+(/\d+\+?/.exec(s)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(F))N="Firefox Mobile";else if("Maxthon"==N&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(D))"Xbox 360"==D&&(F=null),"Xbox 360"==D&&/\bIEMobile\b/.test(e)&&I.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||D||/Browser|Mobi/.test(N))||"Windows CE"!=F&&!/Mobi/i.test(e))if("IE"==N&&j)try{null===n.external&&I.unshift("platform preview")}catch(t){I.unshift("embedded")}else(/\bBlackBerry\b/.test(D)||/\bBB10\b/.test(e))&&(s=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||L)?(F=((s=[s,/BB10/.test(e)])[1]?(D=null,B="BlackBerry"):"Device Software")+" "+s[0],L=null):this!=h&&"Wii"!=D&&(j&&A||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==N&&(F&&!/^Win/.test(F)&&L>5.5||/\bWindows XP\b/.test(F)&&L>8||8==L&&!/\bTrident\b/.test(e)))&&!c.test(s=t.call(h,e.replace(c,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),c.test(N)?(/\bIE\b/.test(s)&&"Mac OS"==F&&(F=null),s="identify"+s):(s="mask"+s,N=R?p(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(F=null),j||(L=null)),M=["Presto"],I.push(s));else N+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==N&&"+"==s[1].slice(-1)?(N="WebKit Nightly",P="alpha",L=s[1].slice(0,-1)):L!=s[1]&&L!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(L=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==M&&(M=["Blink"]),j&&(f||s[1])?(M&&(M[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),M&&(M[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==N&&(!L||parseInt(L)>45)?L=s:"Chrome"==N&&/\bHeadlessChrome/i.test(e)&&I.unshift("headless")),"Opera"==N&&(s=/\bzbov|zvav$/.exec(F))?(N+=" ",I.unshift("desktop mode"),"zvav"==s?(N+="Mini",L=null):N+="Mobile",F=F.replace(RegExp(" *"+s+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(M&&M[1])?(I.unshift("desktop mode"),N="Chrome Mobile",L=null,/\bOS X\b/.test(F)?(B="Apple",F="iOS 4.3+"):F=null):/\bSRWare Iron\b/.test(N)&&!L&&(L=W("Chrome")),L&&0==L.indexOf(s=/[\d.]+$/.exec(F))&&e.indexOf("/"+s+"-")>-1&&(F=m(F.replace(s,""))),F&&-1!=F.indexOf(N)&&!RegExp(N+" OS").test(F)&&(F=F.replace(RegExp(" *"+y(N)+" *"),"")),M&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(F)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(N)&&M[1])&&(s=M[M.length-1])&&I.push(s),I.length&&(I=["("+I.join("; ")+")"]),B&&D&&D.indexOf(B)<0&&I.push("on "+B),D&&I.push((/^on /.test(I[I.length-1])?"":"on ")+D),F&&(s=/ ([\d.+]+)$/.exec(F),u=s&&"/"==F.charAt(F.length-s[0].length-1),F={architecture:32,family:s&&!u?F.replace(s[0],""):F,version:s?s[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(C))&&!/\bi686\b/i.test(C)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+s),"")),N&&(/\bWOW64\b/i.test(e)||j&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&I.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==N&&parseFloat(L)>=39&&(F.architecture=64),e||(e=null);var z={};return z.description=e,z.layout=M&&M[0],z.manufacturer=B,z.name=N,z.prerelease=P,z.product=D,z.ua=e,z.version=N&&L,z.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=t,z.toString=function(){return this.description||""},z.version&&I.unshift(L),z.name&&I.unshift(N),F&&N&&(F!=String(F).split(" ")[0]||F!=N.split(" ")[0]&&!D)&&I.push(D?"("+F+")":"on "+F),I.length&&(z.description=I.join(" ")),z}();o&&i?h(b,(function(t,e){o[e]=t})):r.platform=b}).call(e)}(xS,xS.exports);var kS=Bt,SS=De,TS=ns,ES=w,OS=Ey,_S=jy;Sy("match",(function(t,e,n){return[function(e){var n=ES(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](TS(n))},function(t){var r=kS(this),o=TS(t),i=n(e,r,o);if(i.done)return i.value;if(!r.global)return _S(r,o);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=_S(r,o));){var f=TS(s[0]);c[u]=f,""===f&&(r.lastIndex=OS(o,SS(r.lastIndex),a)),u++}return 0===u?null:c}]}));var AS=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},RS=Bt,CS=w,IS=AS,PS=ns,jS=jy;Sy("search",(function(t,e,n){return[function(e){var n=CS(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](PS(n))},function(t){var r=RS(this),o=PS(t),i=n(e,r,o);if(i.done)return i.value;var a=r.lastIndex;IS(a,0)||(r.lastIndex=0);var s=jS(r,o);return IS(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var LS=An,MS=We,NS=Le,DS=De,BS=H,FS=Us,US=Ms,WS=$s("splice"),zS=Math.max,GS=Math.min,$S=9007199254740991,VS="Maximum allowed length exceeded";function KS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}LS({target:"Array",proto:!0,forced:!WS},{splice:function(t,e){var n,r,o,i,a,s,c=BS(this),u=DS(c.length),f=MS(t,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-f):(n=l-2,r=GS(zS(NS(e),0),u-f)),u+n-r>$S)throw TypeError(VS);for(o=FS(c,r),i=0;i<r;i++)(a=f+i)in c&&US(o,i,c[a]);if(o.length=r,n<r){for(i=f;i<u-r;i++)s=i+n,(a=i+r)in c?c[s]=c[a]:delete c[s];for(i=u;i>u-r+n;i--)delete c[i-1]}else if(n>r)for(i=u-r;i>f;i--)s=i+n-1,(a=i+r-1)in c?c[s]=c[a]:delete c[s];for(i=0;i<n;i++)c[i+f]=arguments[i+2];return c.length=u-r+n,o}}),function(t){var e=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Object.defineProperty(t,"__esModule",{value:!0});var n=nl.exports,r=rl.exports,o=il.exports,i=al.exports,a=ul.exports,s=ll.exports,c=cl.exports,u=pl.exports,f=hl.exports,l=vl,d=dl.exports,p=Ll,h=kv.exports,v=Sv.exports,y=Gv,g=Tk.exports,m=Wk,b=xS.exports;function w(t){return t&&"object"===wr(t)&&"default"in t?t:{default:t}}function x(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var k=w(n),S=w(r),T=w(o),E=w(i),O=w(a),_=w(s),A=w(c),R=w(u),C=w(f),I=w(l),P=w(d),j=x(h),L=x(v),M=w(g),N=x(b);function D(){}function B(){B.init.call(this)}function F(t){return void 0===t._maxListeners?B.defaultMaxListeners:t._maxListeners}function U(t,e,n){if(e)t.call(n);else for(var r=t.length,o=Y(t,r),i=0;i<r;++i)o[i].call(n)}function W(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=Y(t,o),a=0;a<o;++a)i[a].call(n,r)}function z(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=Y(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function G(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=Y(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function $(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=Y(t,o),a=0;a<o;++a)i[a].apply(n,r)}function V(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new D,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=F(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function K(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function q(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Y(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}D.prototype=Object.create(null),B.EventEmitter=B,B.usingDomains=!1,B.prototype.domain=void 0,B.prototype._events=void 0,B.prototype._maxListeners=void 0,B.defaultMaxListeners=10,B.init=function(){this.domain=null,B.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new D,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},B.prototype.getMaxListeners=function(){return F(this)},B.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:U(n,f,this);break;case 2:W(n,f,this,arguments[1]);break;case 3:z(n,f,this,arguments[1],arguments[2]);break;case 4:G(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];$(n,f,this,o)}return!0},B.prototype.addListener=function(t,e){return V(this,t,e,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(t,e){return V(this,t,e,!0)},B.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,K(this,t,e)),this},B.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,K(this,t,e)),this},B.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new D:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new D,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},B.prototype.off=function(t,e){return this.removeListener(t,e)},B.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new D,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new D:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new D,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},B.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},B.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):q.call(t,e)},B.prototype.listenerCount=q,B.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var X=j.getLogger("twilsock");function J(t,e){return["".concat((new Date).toISOString()," Twilsock ").concat(t,":")].concat(Array.from(e))}var H=new(function(){function t(e){R.default(this,t),C.default(this,"prefix",""),this.prefix=null!=e&&e.length>0?" "+e+":":""}return S.default(t,[{key:"setLevel",value:function(t){X.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.trace.apply(null,J("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.debug.apply(null,J("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.info.apply(null,J("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.warn.apply(null,J("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.error.apply(null,J("E",e))}}],[{key:"setLevel",value:function(t){X.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.trace.apply(null,J("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.debug.apply(null,J("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.info.apply(null,J("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.warn.apply(null,J("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.error.apply(null,J("E",e))}}]),t}())(""),Z="0.12.2",Q=function(){function t(e,n,r){R.default(this,t),C.default(this,"confirmedCapabilities",new Set),this.activeGrant=n,this._token=e;var o=r.region||"us1",i="wss://tsock.".concat(o,".twilio.com/v3/wsconnect"),a=r.twilsock||r.Twilsock||{};this.url=a.uri||i,this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver=Z,this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return S.default(t,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(t){this._token=t}},{key:"updateContinuationToken",value:function(t){this._continuationToken=t}}]),t}(),tt=function t(e){R.default(this,t),this.id=e||"TM".concat(y.v4())};function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var nt=function(t){O.default(n,t);var e=et(n);function n(t,r,o,i,a){var s;return R.default(this,n),s=e.call(this),C.default(T.default(s),"method","init"),s.token=t,s.continuation_token=r,s.metadata=o,s.registrations=i,s.tweaks=a,s.capabilities=["client_update","offline_storage","telemetry.v1"],s}return n}(tt);function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var ot=function(t){O.default(n,t);var e=rt(n);function n(t,r,o,i,a,s,c){var u;return R.default(this,n),(u=e.call(this,t)).continuationToken=r,u.continuationTokenStatus=i,u.offlineStorage=a,u.initRegistrations=s,u.debugInfo=c,u.confirmedCapabilities=o,u}return n}(tt);function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var at=function(t){O.default(n,t);var e=it(n);function n(t){var r;return R.default(this,n),r=e.call(this),C.default(T.default(r),"method","update"),r.token=t,r}return n}(tt);function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var ct=function(t){O.default(n,t);var e=st(n);function n(t,r,o){var i;return R.default(this,n),i=e.call(this),C.default(T.default(i),"method","message"),i.active_grant=t,i.payload_type=r,i.http_request=o,i}return n}(tt);function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var ft=function(t){O.default(n,t);var e=ut(n);function n(t){var r;return R.default(this,n),r=e.call(this,t),C.default(T.default(r),"method","reply"),C.default(T.default(r),"payload_type","application/json"),C.default(T.default(r),"status",{code:200,status:"OK"}),r}return n}(tt);function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var dt=function(t){O.default(n,t);var e=lt(n);function n(){var t;return R.default(this,n),t=e.call(this),C.default(T.default(t),"method","close"),t}return n}(tt);function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var ht=function t(e,n,r,o,i,a){R.default(this,t),this.start=e,this.end=n,this.title=r,this.details=o,this.id=i,this.type=a},vt=function(t){O.default(n,t);var e=pt(n);function n(t){var r;return R.default(this,n),r=e.call(this),C.default(T.default(r),"method","telemetry.v1"),r.events=t,r}return n}(tt);function yt(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})).length}function gt(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})),n=new Uint8Array(e.length);return Array.prototype.forEach.call(e,(function(t,e){n[e]=t.charCodeAt(0)})),n}function mt(t){var e=Array.prototype.map.call(t,(function(t){return String.fromCharCode(t)})).join("").replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(e)}function bt(t){return JSON.parse(mt(t))}var wt=function(){function t(){R.default(this,t)}return S.default(t,null,[{key:"parse",value:function(t){var e,n,r=new Uint8Array(t),o=function(t){for(var e="",n=0;n<t.length;++n){var r=String.fromCharCode(t[n]);if(e+=r,"\r"===r){n+=2;break}}var o=e.split(" ");return{size:n,protocol:o[0],version:o[1],headerSize:Number(o[2])}}(r);if("TWILSOCK"!==o.protocol||"V3.0"!==o.version)return H.error("unsupported protocol: ".concat(o.protocol," ver ").concat(o.version)),null;try{e=bt(r.subarray(o.size,o.size+o.headerSize))}catch(e){return H.error("failed to parse message header",e,t),null}if(H.debug("message received: ",e.method),H.trace("message received: ",e),e.payload_size>0){var i=2+o.size+o.headerSize,a=e.payload_size;if(e.hasOwnProperty("payload_type")&&0!==e.payload_type.indexOf("application/json"))0===e.payload_type.indexOf("text/plain")&&(n=mt(r.subarray(i,i+a)));else try{n=bt(r.subarray(i,i+a))}catch(e){return H.error("failed to parse message body",e,t),null}}return{method:e.method,header:e,payload:n}}},{key:"createPacket",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.payload_size=yt(e);var n=JSON.stringify(t),r="TWILSOCK V3.0 "+yt(n);H.debug("send request:",r+n+e);var o=gt(r+"\r\n"+n+"\r\n"+e);return o.buffer}}]),t}();function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var kt=function(t){O.default(n,t);var e=xt(n);function n(t){return R.default(this,n),e.call(this,t)}return n}(M.default(Error));function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Tt=function(t){O.default(n,t);var e=St(n);function n(t,r){var o;return R.default(this,n),(o=e.call(this,t)).reply=r,o}return n}(kt);function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){C.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var At=function(t){O.default(n,t);var e=_t(n);function n(t){var r;return R.default(this,n),r=e.call(this),C.default(T.default(r),"newBackoff",null),C.default(T.default(r),"usedBackoff",null),C.default(T.default(r),"retrier",null),r.options=t?Ot({},t):{},r}return S.default(n,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(t){this.newBackoff=t}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");var t,e;this.newBackoff?!this.usedBackoff||this.usedBackoff<this.newBackoff?this.createRetrier():null===(t=this.retrier)||void 0===t||t.failed(new Error):null===(e=this.retrier)||void 0===e||e.failed(new Error)}},{key:"cancel",value:function(){var t;null===(t=this.retrier)||void 0===t||t.cancel()}},{key:"cleanRetrier",value:function(){var t,e;null===(t=this.retrier)||void 0===t||t.removeAllListeners(),null===(e=this.retrier)||void 0===e||e.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var t=Ot({},this.options);return this.newBackoff&&(t.min=this.newBackoff,t.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),t.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,t}},{key:"createRetrier",value:function(){var t=this;this.cleanRetrier();var e=this.getRetryPolicy();this.retrier=new m.Retrier(e),this.retrier.once("attempt",(function(){var e,n;null===(e=t.retrier)||void 0===e||e.on("attempt",(function(){return t.emit("attempt")})),null===(n=t.retrier)||void 0===n||n.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(e){return t.emit("failed",e)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),n}(B);function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Ct=function(t){O.default(o,t);var e,n,r=Rt(o);function o(t,e,n){var i;R.default(this,o),i=r.call(this),C.default(T.default(i),"disconnectingTimer",null),C.default(T.default(i),"disconnectedPromiseResolve",null),C.default(T.default(i),"terminalStates",["disconnected","rejected"]),C.default(T.default(i),"tokenExpiredSasCode",20104),C.default(T.default(i),"terminationReason","Connection is not initialized"),i.websocket=t,i.websocket.on("connected",(function(){return i.fsm.socketConnected()})),i.websocket.on("disconnected",(function(){return i.fsm.socketClosed()})),i.websocket.on("message",(function(t){return i.onIncomingMessage(t)})),i.websocket.on("socketError",(function(t){return i.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(t.message),httpStatusCode:null,errorCode:null})})),i.transport=e,i.config=n,i.retrier=new At(n.retryPolicy),i.retrier.on("attempt",(function(){return i.retry()})),i.retrier.on("failed",(function(t){H.warn("Retrying failed: ".concat(t.message)),i.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){H.debug("Browser reported connectivity state: online"),i.resetBackoff(),i.fsm.systemOnline()})),window.addEventListener("offline",(function(){H.debug("Browser reported connectivity state: offline"),i.websocket.close(),i.fsm.socketClosed()})));var a=L.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){i.setupSocket(),i.emit("connecting")},onEnterInitialising:function(){i.sendInit()},onLeaveInitialising:function(){i.cancelInit()},onEnterUpdating:function(){i.sendUpdate()},onLeaveUpdating:function(){i.cancelUpdate()},onEnterRetrying:function(){i.initRetry(),i.emit("connecting")},onEnterConnected:function(){i.resetBackoff(),i.onConnected()},onUserUpdateToken:function(){i.resetBackoff()},onTokenRejected:function(){i.resetBackoff(),i.closeSocket(!0),i.finalizeSocket()},onUserDisconnect:function(){i.closeSocket(!0)},onEnterDisconnecting:function(){i.startDisconnectTimer()},onLeaveDisconnecting:function(){i.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){i.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){i.cancelDisconnectTimer()},onDisconnected:function(){i.resetBackoff(),i.finalizeSocket()},onReceiveClose:function(){i.onCloseReceived()},onReceiveOffload:function(t,e){H.debug("onreceiveoffload: ",e),i.modifyBackoff(e.body),i.onCloseReceived()},onUnsupported:function(){i.closeSocket(!0),i.finalizeSocket()},onError:function(t,e){i.closeSocket(e),i.finalizeSocket()},onEnterState:function(t){"none"!==t.from&&i.changeState(t)},onInvalidTransition:function(t,e,n){H.warn("FSM: unexpected transition",e,n)}}});return i.fsm=new a,i}return S.default(o,[{key:"changeState",value:function(t){H.debug("FSM: ".concat(t.transition,": ").concat(t.from," --\x3e ").concat(t.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){H.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(t){H.trace("modifyBackoff",t);var e=t?t.backoff_policy:null;e&&"number"==typeof e.reconnect_min_ms&&this.retrier.modifyBackoff(e.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var t=this;H.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){H.debug("disconnecting is timed out"),t.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){H.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}},{key:"initRetry",value:function(){H.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(H.trace("retry"),this.websocket.close(),this.fsm.userRetry()):H.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){H.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){H.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(t){var e=wt.parse(t);if(e){var n=e.method,r=e.header,o=e.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,o);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:o});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)H.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:o});else if(406===r.status.code){var i="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(i,r,!0),H.error(i),this.fsm.receiveFatalClose()}else 417===r.status.code?(H.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(H.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(H.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(H.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}}},{key:"sendInit",value:(n=k.default(I.default.mark((function t(){var e,n;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.trace("sendInit"),t.prev=1,this.emit("beforeSendInit"),t.next=5,this.transport.sendInit();case 5:e=t.sent,this.config.updateContinuationToken(e.continuationToken),this.config.confirmedCapabilities=e.confirmedCapabilities,this.fsm.initSuccess(e),this.emit("initialized",e),this.emit("tokenUpdated"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),t.t0 instanceof Tt?(n=!1,H.warn("Init rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),this.emit("sendInitFailed"),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.initError(!0)):500===t.t0.reply.status.code?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(t.t0.message,t.t0.reply,n)):(this.terminationReason=t.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(t.t0.message,"\n").concat(JSON.stringify(t.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"sendUpdate",value:(e=k.default(I.default.mark((function t(){var e,n,r;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.trace("sendUpdate"),e=new at(this.config.token),t.prev=2,t.next=5,this.transport.sendWithReply(e);case 5:n=t.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0 instanceof Tt?(r=!1,H.warn("Token update rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.updateError(t.t0.reply.status)):this.fsm.updateError(t.t0.reply.status),this.emitReplyConnectionError(t.t0.message,t.t0.reply,r)):(this.emit("error",!1,t.t0.message,null,null),this.fsm.updateError(t.t0)),this.emit("tokenUpdated",t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return e.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(t,e,n){var r=e.status&&e.status.description?e.status.description:t,o=e.status.code,i=e.status&&e.status.errorCode?e.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:"Connection error: ".concat(r),httpStatusCode:o,errorCode:i})}},{key:"cancelInit",value:function(){H.trace("cancelInit")}},{key:"cancelUpdate",value:function(){H.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(t){H.trace("confirmReceiving");try{this.transport.send(new ft(t.id))}catch(t){H.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(t){var e=this;H.trace("closeSocket (graceful: ".concat(t,")")),t&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return e.fsm.socketClosed()}),0)}},{key:"connect",value:function(){H.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var t=this;return H.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(e){t.disconnectedPromiseResolve=e,t.fsm.userDisconnect()}))}},{key:"updateToken",value:function(t){var e=this;return H.trace("updateToken:",t),new Promise((function(t,n){e.once("tokenUpdated",(function(e){e?n(e):t()})),e.fsm.userUpdateToken()}))}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),o}(B),It=function(){function t(){R.default(this,t)}return S.default(t,null,[{key:"getMetadata",value:function(t){var e,n,r,o,i,a,s,c,u=t&&t.clientMetadata?t.clientMetadata:{},f={env:null!==(e=N.name)&&void 0!==e?e:"unknown",envv:null!==(n=N.version)&&void 0!==n?n:"unknown",os:null!==(r=null===(o=N.os)||void 0===o?void 0:o.family)&&void 0!==r?r:"unknown",osv:null!==(i=null===(a=N.os)||void 0===a?void 0:a.version)&&void 0!==i?i:"unknown",osa:null!==(s=null===(c=N.os)||void 0===c?void 0:c.architecture)&&void 0!==s?s:"unknown",sdk:"js-default"},l={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(t){return t in u||t in f})).forEach((function(t){return l[t]=t in u?u[t]:f[t]})),l}}]),t}();var Pt=function(){function t(e,n){var r=this;R.default(this,t),this.config=n,this.activeRequests=new Map,this.channel=e,this.channel.on("reply",(function(t){return r.processReply(t)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new kt("disconnected"))})),r.activeRequests.clear()}))}var e;return S.default(t,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(t){var e,n=this.activeRequests.get(t.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(t.id),(e=t.status.code)>=200&&e<300?n.resolve(t):(n.reject(new Tt("Transport failure: "+t.status.status,t)),H.trace("message rejected")))}},{key:"storeRequest",value:function(t,e,n){var r={resolve:e,reject:n,timeout:setTimeout((function(){H.trace("request",t,"is timed out"),n(new kt("Twilsock: request timeout: "+t))}),3e4)};this.activeRequests.set(t,r)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new kt("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(e=k.default(I.default.mark((function t(){var e,n,r;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.trace("sendInit"),e=It.getMetadata(this.config),n=new nt(this.config.token,this.config.continuationToken,e,this.config.initRegistrations,this.config.tweaks),t.next=5,this.sendWithReply(n);case 5:return r=t.sent,t.abrupt("return",new ot(r.id,r.header.continuation_token,new Set(r.header.capabilities),r.header.continuation_token_status,r.header.offline_storage,r.header.init_registrations,r.header.debug_info));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sendClose",value:function(){var t=new dt;this.send(t)}},{key:"sendWithReply",value:function(t,e){var n=this;return new Promise((function(r,o){var i=n.send(t,e);n.storeRequest(i,r,o)}))}},{key:"send",value:function(t,e){t.id=t.id||"TM".concat(y.v4());var n=wt.createPacket(t,function(t){switch(P.default(t)){case"undefined":return"";case"object":return JSON.stringify(t);default:return t}}(e));try{return this.channel.send(n),t.id}catch(e){throw H.debug("failed to send ",t,e),H.trace(e.stack),e}}}]),t}();function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Lt=function(t){O.default(r,t);var n=jt(r);function r(t){var o;return R.default(this,r),o=n.call(this),C.default(T.default(o),"socket",null),o.url=t,o.url=t,o.WebSocket=e.WebSocket||e.MozWebSocket||{},o}return S.default(r,[{key:"isConnected",get:function(){return!!this.socket&&1===this.socket.readyState}},{key:"connect",value:function(){var t,e=this;H.trace("connecting to socket");try{t=new this.WebSocket(this.url)}catch(t){return H.debug("Socket error: ".concat(this.url)),void this.emit("socketError",t)}t.binaryType="arraybuffer",t.onopen=function(){H.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){H.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){H.debug("Socket error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(t){return this.socket&&this.socket.send(t)}},{key:"close",value:function(){if(H.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),r}(B);function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Nt=function(t){O.default(c,t);var e,n,r,o,i,a,s=Mt(c);function c(t){var e;return R.default(this,c),(e=s.call(this)).transport=t,e.registrations=new Map,e.registrationsInProgress=new Map,e}return S.default(c,[{key:"putNotificationContext",value:(a=k.default(I.default.mark((function t(e,n){var r;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"deleteNotificationContext",value:(i=k.default(I.default.mark((function t(e){var n;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(n);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateRegistration",value:(o=k.default(I.default.mark((function t(e,n){var r,o;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.debug("update registration for context",e),(r=this.registrationsInProgress.get(e))||(r=new Set,this.registrationsInProgress.set(e,r)),o=y.v4(),r.add(o),t.prev=5,t.next=8,this.putNotificationContext(e,n);case 8:H.debug("registration attempt succeeded for context",n),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registered",e)),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(5),H.warn("registration attempt failed for context",n),H.debug(t.t0),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registrationFailed",e,t.t0));case 19:case"end":return t.stop()}}),t,this,[[5,13]])}))),function(t,e){return o.apply(this,arguments)})},{key:"updateRegistrations",value:(r=k.default(I.default.mark((function t(){var e,n=this;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.trace("refreshing ".concat(this.registrations.size," registrations")),e=[],this.registrations.forEach((function(t,r){e.push(n.updateRegistration(r,t))})),t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setNotificationsContext",value:(n=k.default(I.default.mark((function t(e,n){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}throw new kt("Invalid arguments provided");case 2:return this.registrations.set(e,n),t.next=5,this.updateRegistration(e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeNotificationsContext",value:(e=k.default(I.default.mark((function t(e){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrations.has(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.deleteNotificationContext(e);case 4:this.transport.isConnected&&this.registrations.delete(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),c}(B);function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Bt=function(t){O.default(n,t);var e=Dt(n);function n(t,r,o){var i;return R.default(this,n),(i=e.call(this,r)).status=t,i.description=r,i.body=o,i}return n}(kt);function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Ut=function(t){O.default(n,t);var e=Ft(n);function n(t){return R.default(this,n),e.call(this,t)}return n}(kt);function Wt(t,e){var n=function(t){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(e){var n={protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7],params:{}};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(t){return t.split("=")})).reduce((function(t,e){return t.hasOwnProperty(e[0])?Array.isArray(t[e[0]])?t[e[0]].push(e[1]):t[e[0]]=[t[e[0]],e[1]]:t[e[0]]=e[1],t}),{})}return n}throw new kt("Incorrect URI: "+t)}(e),r={method:t,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function zt(t,e,n,r,o){return{to:Wt(t,e),headers:n,body:r,grant:o}}var Gt=function(){function t(e,n,r){R.default(this,t),this.config=r,this.transport=e,this.pendingMessages=[],this.twilsock=n}var e;return S.default(t,[{key:"saveMessage",value:function(t){var e=this;return new Promise((function(n,r){var o={message:t,resolve:n,reject:r,alreadyRejected:!1,timeout:setTimeout((function(){H.debug("request is timed out"),r(new kt("request '".concat(t.to.method,"' to '").concat(t.to.host,"' timed out"))),o.alreadyRejected=!0}),2e4)};e.pendingMessages.push(o)}))}},{key:"sendPendingMessages",value:function(){for(var t=this,e=function(){var e=t.pendingMessages[0];if(!e.alreadyRejected)try{var n=e.message;t.actualSend(n).then((function(t){return e.resolve(t)})).catch((function(t){return e.reject(t)})),clearTimeout(e.timeout)}catch(t){return H.debug("Failed to send pending message",t),"break"}t.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){if("break"===e())break}}},{key:"rejectPendingMessages",value:function(){var t=this;this.pendingMessages.forEach((function(e){e.reject(new Ut("Unable to connect: "+t.twilsock.getTerminationReason)),e.alreadyRejected=!0,clearTimeout(e.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(e=k.default(I.default.mark((function t(e){var n,r,o,i,a,s,c,u;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.to,o=e.headers,i=e.body,a=null!==(n=e.grant)&&void 0!==n?n:this.config.activeGrant,s={host:r.host,path:r.path,method:r.method,params:r.params,headers:o},c=new ct(a,o["Content-Type"]||"application/json",s),H.trace("Sending upstream message",c),t.next=9,this.transport.sendWithReply(c,i);case 9:if(u=t.sent,H.trace("Received upstream message response",u),!((l=u)&&l.header&&l.header.http_status)||(f=u.header.http_status.code)>=200&&f<300){t.next=13;break}throw new Bt(u.header.http_status.code,u.header.http_status.status,u.body);case 13:return t.abrupt("return",{status:u.header.http_status,headers:u.header.http_headers,body:u.body});case 14:case"end":return t.stop()}var f,l}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"send",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new Ut("Unable to connect: "+this.twilsock.getTerminationReason));var i=zt(t,e,n,r,o);return this.twilsock.isConnected?this.actualSend(i):this.saveMessage(i)}}]),t}(),$t=function(){function t(){var e=this;R.default(this,t),this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return S.default(t,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(t){this._resolve(t)}},{key:"set",value:function(t){this._resolve(t)}},{key:"fail",value:function(t){this._reject(t)}}]),t}(),Vt=function(){function t(e){R.default(this,t),this.id=e}return S.default(t,null,[{key:"create",value:function(e){if(e instanceof Object&&"storage_id"in e)return new t(e.storage_id);throw new kt('Field "storage_id" is missing')}}]),t}(),Kt=function(){function t(){return R.default(this,t),C.default(this,"initializedFlag","twilio_twilsock_token_storage"),C.default(this,"tokenStoragePrefix","twilio_continuation_token_"),t._instance||(this.initialize(),t._instance=this),t._instance}return S.default(t,[{key:"sessionStorage",value:function(){try{return e.sessionStorage}catch(t){return null}}},{key:"window",value:function(){try{return e.window}catch(t){return null}}},{key:"storeToken",value:function(t,e){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(e),t)}},{key:"getStoredToken",value:function(t){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(t)):null}},{key:"initialize",value:function(){var t=this;if(this.canStore()){this.sessionStorage.getItem(this.initializedFlag)&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var e=this.sessionStorage.removeItem;this.window.addEventListener("unload",(function(){e(t.initializedFlag)}))}}},{key:"clear",value:function(){if(this.canStore()){for(var t=[],e=0;e<this.sessionStorage.length;e++){var n=this.sessionStorage.key(e);n&&0===n.indexOf(this.tokenStoragePrefix)&&t.push(n)}var r=this.sessionStorage.removeItem;t.forEach((function(t){return r(t)})),r(this.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(this.tokenStoragePrefix).concat(t)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),t}();C.default(Kt,"_instance",null);var qt,Yt,Xt=new Kt,Jt=function(){function t(e,n,r,o,i,a){R.default(this,t),this.title=e,this.details=n,this.start=r,this.type=i,this.id=a,this.end=o}return S.default(t,[{key:"toTelemetryEvent",value:function(){var t=new Date,e=this.start,n=this.end?this.end:t;if(n<e){var r=n;n=e,e=r}var o=e.getTime()-t.getTime(),i=n.getTime()-t.getTime();return new ht(o,i,this.title,this.details,this.id,this.type)}}]),t}();t.TelemetryPoint=void 0,(qt=t.TelemetryPoint||(t.TelemetryPoint={}))[qt.Start=0]="Start",qt[qt.End=1]="End",t.EventSendingLimitation=void 0,(Yt=t.EventSendingLimitation||(t.EventSendingLimitation={}))[Yt.MinEventsPortion=0]="MinEventsPortion",Yt[Yt.AnyEvents=1]="AnyEvents",Yt[Yt.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished";var Ht=function(){function e(t,n){R.default(this,e),C.default(this,"minEventsPortionToSend",50),C.default(this,"maxEventsPortionToSend",100),C.default(this,"pendingEvents",new Map),C.default(this,"readyEvents",[]),C.default(this,"hasInitializationFinished",!1),C.default(this,"_canSendTelemetry",!1),this.config=t,this.packetInterface=n}return S.default(e,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){H.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(t.EventSendingLimitation.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(t){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(t)}},{key:"addPartialEvent",value:function(e,n,r){H.debug("Adding ".concat(r===t.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(n,"' event"));var o=this.pendingEvents.has(n);if(r===t.TelemetryPoint.Start)o&&H.debug("Overwriting starting point for '".concat(n,"' event")),this.pendingEvents.set(n,e);else{if(!o)return void H.info("Could not find started event for '".concat(n,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(n),e)),this.pendingEvents.delete(n)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==t.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==t.EventSendingLimitation.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(t){var e=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return t&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(t,n){if(!(r.length>=e.maxEventsPortionToSend)){var o=e.pendingEvents.get(n);e.pendingEvents.delete(n),r.push(new Jt("[UNFINISHED] ".concat(o.title),o.details,o.start,null,o.type,o.id))}})),r}},{key:"merge",value:function(t,e){return new Jt(e.title?e.title:t.title,e.details?e.details:t.details,t.start,e.end,e.type?e.type:t.type,e.id?e.id:t.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(t.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(t){var e=this.getTelemetryToSend(t);if(0!==e.length)try{this.packetInterface.send(new vt(e.map((function(t){return t.toTelemetryEvent()}))))}catch(t){H.debug("Error while sending ".concat(e.length," telemetry events due to ").concat(t,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(e)}}}]),e}();function Zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Qt=function t(){R.default(this,t)};C.default(Qt,"TWILSOCK_CONNECT","twilsock.sdk.connect"),C.default(Qt,"TWILSOCK_INIT","twilsock.sdk.init"),t.TwilsockClient=function(e){O.default(l,e);var n,r,o,i,a,s,c,u,f=Zt(l);function l(e,n,r){var o;R.default(this,l),o=f.call(this),C.default(T.default(o),"version",Z),C.default(T.default(o),"offlineStorageDeferred",new $t),r.continuationToken=r.continuationToken?r.continuationToken:Xt.getStoredToken(n);var i=o.config=new Q(e,n,r);H.setLevel(i.logLevel);var a=new Lt(i.url),s=new Pt(a,i);return o.channel=new Ct(a,s,i),o.registrations=new Nt(s),o.upstream=new Gt(s,o.channel,i),o.telemetryTracker=new Ht(i,s),o.channel.on("initialized",(function(){return o.telemetryTracker.canSendTelemetry=!0})),a.on("disconnected",(function(){return o.telemetryTracker.canSendTelemetry=!1})),o.registrations.on("registered",(function(t){return o.emit("registered",t)})),o.channel.on("message",(function(t,e){return setTimeout((function(){return o.emit("message",t,e)}),0)})),o.channel.on("stateChanged",(function(t){return setTimeout((function(){return o.emit("stateChanged",t)}),0)})),o.channel.on("connectionError",(function(t){return setTimeout((function(){return o.emit("connectionError",t)}),0)})),o.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return o.emit("tokenAboutToExpire")}),0)})),o.channel.on("tokenExpired",(function(){return setTimeout((function(){return o.emit("tokenExpired")}),0)})),o.channel.on("connected",(function(){return o.registrations.updateRegistrations()})),o.channel.on("connected",(function(){return o.upstream.sendPendingMessages()})),o.channel.on("connected",(function(){return setTimeout((function(){return o.emit("connected")}),0)})),o.channel.on("beforeConnect",(function(){return o.telemetryTracker.addPartialEvent(new Jt("Establish WebSocket connection","",new Date),Qt.TWILSOCK_CONNECT,t.TelemetryPoint.Start)})),o.channel.on("connected",(function(){return o.telemetryTracker.addPartialEvent(new Jt("Establish WebSocket connection","",new Date,new Date),Qt.TWILSOCK_CONNECT,t.TelemetryPoint.End)})),o.channel.on("beforeSendInit",(function(){return o.telemetryTracker.addPartialEvent(new Jt("Send Twilsock init","",new Date),Qt.TWILSOCK_INIT,t.TelemetryPoint.Start)})),o.channel.on("initialized",(function(){return o.telemetryTracker.addPartialEvent(new Jt("Send Twilsock init","Succeeded",new Date,new Date),Qt.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("sendInitFailed",(function(){return o.telemetryTracker.addPartialEvent(new Jt("Send Twilsock init","Failed",new Date,new Date),Qt.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("initialized",(function(t){o.handleStorageId(n,t),Xt.storeToken(t.continuationToken,n),setTimeout((function(){return o.emit("initialized",t)}),0)})),o.channel.on("disconnected",(function(){return setTimeout((function(){return o.emit("disconnected")}),0)})),o.channel.on("disconnected",(function(){return o.upstream.rejectPendingMessages()})),o.channel.on("disconnected",(function(){return o.offlineStorageDeferred.fail(new kt("Client disconnected"))})),o.offlineStorageDeferred.promise.catch((function(){})),o}return S.default(l,[{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return H.debug("Emitting ".concat(t.toString(),"(").concat(r.map((function(t){return JSON.stringify(t)})).join(", "),")")),(e=E.default(A.default(l.prototype),"emit",this)).call.apply(e,[this,t].concat(r))}},{key:"handleStorageId",value:function(t,e){if(e.offlineStorage)if(e.offlineStorage.hasOwnProperty(t))try{this.offlineStorageDeferred.set(Vt.create(e.offlineStorage[t])),H.debug("Offline storage for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage[t]),"."))}catch(n){this.offlineStorageDeferred.fail(new kt("Failed to parse offline storage for ".concat(t," ").concat(JSON.stringify(e.offlineStorage[t]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new kt("No offline storage id for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage))));else this.offlineStorageDeferred.fail(new kt("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:(u=k.default(I.default.mark((function t(e){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(H.trace("updating token '".concat(e,"'")),this.config.token!==e){t.next=3;break}return t.abrupt("return");case 3:return this.config.updateToken(e),t.next=6,this.channel.updateToken(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setNotificationsContext",value:(c=k.default(I.default.mark((function t(e,n){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.setNotificationsContext(e,n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"removeNotificationsContext",value:(s=k.default(I.default.mark((function t(e){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.removeNotificationsContext(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:(a=k.default(I.default.mark((function e(){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEventsIncludingUnfinished),e.next=3,this.channel.disconnect();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"get",value:(i=k.default(I.default.mark((function e(n,r,o){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("GET",n,r,void 0,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"post",value:(o=k.default(I.default.mark((function e(n,r,o,i){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("POST",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,r){return o.apply(this,arguments)})},{key:"put",value:(r=k.default(I.default.mark((function e(n,r,o,i){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("PUT",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,o){return r.apply(this,arguments)})},{key:"delete",value:(n=k.default(I.default.mark((function e(n,r,o,i){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("DELETE",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,r,o){return n.apply(this,arguments)})},{key:"addTelemetryEvent",value:function(t){this.telemetryTracker.addTelemetryEvent(t),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,n,r){this.telemetryTracker.addPartialEvent(e,n,r),r===t.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),l}(B),t.TwilsockClient=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P.default(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([p.validateConstructorTypes(p.nonEmptyString,p.nonEmptyString,[p.pureObject,"undefined",p.literal(null)]),function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":P.default(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[String,String,Object])],t.TwilsockClient);var te=function(){function t(e){R.default(this,t),this.product=e,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return S.default(t,[{key:"populateInitRegistrations",value:function(t){var e=new Set(this.message_types);for(var n in t)e.add(t[n]);this.message_types=Array.from(e)}}]),t}();t.InitRegistration=te,t.TelemetryEventDescription=Jt,t.TelemetryTracker=Ht,t.TransportUnavailableError=Ut,t.Twilsock=t.TwilsockClient,t.TwilsockError=kt}(el);var qS=s,YS=a,XS=Pn,JS=en,HS=c,ZS=H,QS=b,tT=Object.assign,eT=Object.defineProperty,nT=!tT||YS((function(){if(qS&&1!==tT({b:1},tT(eT({},"a",{enumerable:!0,get:function(){eT(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=tT({},t)[n]||XS(tT({},e)).join("")!=r}))?function(t,e){for(var n=ZS(t),r=arguments.length,o=1,i=JS.f,a=HS.f;r>o;)for(var s,c=QS(arguments[o++]),u=i?XS(c).concat(i(c)):XS(c),f=u.length,l=0;f>l;)s=u[l++],qS&&!a.call(c,s)||(n[s]=c[s]);return n}:tT;function rT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oT(t,e){if(t){if("string"==typeof t)return rT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rT(t,e):void 0}}function iT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||oT(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aT(t){return function(t){if(Array.isArray(t))return rT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||oT(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}An({target:"Object",stat:!0,forced:Object.assign!==nT},{assign:nT});var sT=kv.exports.getLogger("twilio-notificatiions");function cT(t,e){return["".concat((new Date).toISOString()," Twilio.Notifications ").concat(t,":")].concat(Array.from(e))}var uT=new(function(){function t(){vr(this,t)}return gr(t,[{key:"setLevel",value:function(t){sT.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];sT.trace.apply(null,cT("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];sT.debug.apply(null,cT("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];sT.info.apply(null,cT("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];sT.warn.apply(null,cT("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];sT.error.apply(null,cT("E",e))}}]),t}());function fT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sr(t);if(e){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}var lT=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;vr(this,t),this.token=e,this.notificationId=n,this.messageTypes=r};function dT(t,e){var n=new Set;return t.notificationId!==e.notificationId&&n.add("notificationId"),t.token!==e.token&&n.add("token"),function(t,e){return[].concat(aT(aT(t).filter((function(t){return!e.has(t)}))),aT(aT(e).filter((function(e){return!t.has(e)}))))}(t.messageTypes,e.messageTypes).length>0&&n.add("messageType"),[n.size>0,n]}var pT=function(t){br(r,t);var e,n=fT(r);function r(t){var e;return vr(this,r),KS(xr(e=n.call(this)),"desiredState",new lT),KS(xr(e),"currentState",new lT),KS(xr(e),"_hasActiveAttempt",!1),e.channelType=t,e}return gr(r,[{key:"setNotificationId",value:function(t){this.desiredState.notificationId=t}},{key:"isActive",value:function(){return""!==this.desiredState.notificationId}},{key:"subscribe",value:function(t){this.desiredState.messageTypes.has(t)?uT.debug("message type '".concat(t,"' for channel ").concat(this.channelType," is already registered")):this.desiredState.messageTypes.add(t)}},{key:"unsubscribe",value:function(t){this.desiredState.messageTypes.has(t)&&this.desiredState.messageTypes.delete(t)}},{key:"updateToken",value:function(t){this.desiredState.token=t}},{key:"commitChanges",value:(e=hr(to.mark((function t(){var e,n,r,o,i,a;return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._hasActiveAttempt){t.next=3;break}throw uT.error("One registration attempt is already in progress"),new Error("One registration attempt is already in progress");case 3:if(e=dT(this.desiredState,this.currentState),n=iT(e,2),r=n[0],o=n[1],r){t.next=6;break}return t.abrupt("return");case 6:if(this.currentState.notificationId||o.delete("notificationId"),uT.trace("Persisting ".concat(this.channelType," registration"),o,this.desiredState),t.prev=8,this._hasActiveAttempt=!0,(i=new lT).token=this.desiredState.token,i.notificationId=this.desiredState.notificationId,i.messageTypes=new Set(this.desiredState.messageTypes),!(i.messageTypes.size>0)){t.next=24;break}return t.next=17,this.updateRegistration(i,o);case 17:a=t.sent,this.currentState.token=a.token,this.currentState.notificationId=a.notificationId,this.currentState.messageTypes=new Set(a.messageTypes),this.emit("stateChanged",this.channelType,"registered",this.currentState),t.next=30;break;case 24:return t.next=26,this.removeRegistration();case 26:this.currentState.token=i.token,this.currentState.notificationId=i.notificationId,this.currentState.messageTypes.clear(),this.emit("stateChanged",this.channelType,"unregistered",this.currentState);case 30:t.next=35;break;case 32:throw t.prev=32,t.t0=t.catch(8),t.t0;case 35:return t.prev=35,this._hasActiveAttempt=!1,t.finish(35);case 38:case"end":return t.stop()}}),t,this,[[8,32,35,38]])}))),function(){return e.apply(this,arguments)})}]),r}($f);function hT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sr(t);if(e){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}var vT={min:2e3,max:12e4,randomness:.2},yT=function(t){br(i,t);var e,n,r,o=hT(i);function i(t,e,n,r){var a;return vr(this,i),KS(xr(a=o.call(this,t)),"registrationId",null),a.context=e,a.twilsock=n,a.registrarUrl=r,a}return gr(i,[{key:"updateRegistration",value:(r=hr(to.mark((function t(e,n){var r,o,i,a,s,c=this;return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.has("notificationId")){t.next=3;break}return t.next=3,this.removeRegistration();case 3:if(e.notificationId&&e.notificationId.length){t.next=6;break}throw uT.error("No push notification ID for registration"),new Error("No push notification ID for registration");case 6:return uT.trace("Registering",this.channelType,e),r={endpoint_platform:this.context.platform,channel_type:this.channelType,version:this.context.protocolVersion.toString(),message_types:Array.from(e.messageTypes),data:{registration_id:e.notificationId}},o=this.context.productId,i="".concat(this.registrarUrl,"?productId=").concat(o),a={"Content-Type":"application/json"},uT.trace("Creating registration for channel ".concat(this.channelType)),t.prev=12,t.next=15,new wS(vT).run((function(){return c.twilsock.post(i,a,r,o)}));case 15:s=t.sent,this.registrationId=s.body.id,uT.debug("Registration created: ",s),t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(12),uT.error("Registration failed: ",t.t0),t.t0;case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}}),t,this,[[12,20]])}))),function(t,e){return r.apply(this,arguments)})},{key:"removeRegistration",value:(n=hr(to.mark((function t(){var e,n,r,o=this;return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrationId){t.next=2;break}return t.abrupt("return");case 2:return e=this.context.productId,n="".concat(this.registrarUrl,"/").concat(this.registrationId,"?productId=").concat(e),r={"Content-Type":"application/json"},uT.trace("Removing registration for ".concat(this.channelType)),t.prev=6,t.next=9,new wS(Object.assign(vT,{maxAttemptsCount:3})).run((function(){return o.twilsock.delete(n,r,{},e)}));case 9:this.registrationId=null,this.currentState.notificationId="",uT.debug("Registration removed for ".concat(this.channelType)),t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(6),uT.error("Failed to remove registration ",this.channelType,t.t0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[6,14]])}))),function(){return n.apply(this,arguments)})},{key:"sendDeviceRemoveRequest",value:(e=hr(to.mark((function t(e){var n,r,o,i,a=this;return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e){t.next=2;break}throw new Error("Empty registration ID");case 2:return n=this.context.productId,r="".concat(this.registrarUrl,"?productId=").concat(n),o={"Content-Type":"application/json"},i={binding_type:this.channelType,address:e},t.prev=6,uT.trace("Removing old registrations for ".concat(this.channelType)),t.next=10,new wS(Object.assign(vT,{maxAttemptsCount:3})).run((function(){return a.twilsock.delete(r,o,i,n)}));case 10:this.registrationId=null,this.currentState.notificationId="",uT.debug("Registration removed for ".concat(this.channelType)),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(6),uT.error("Failed to remove registration ",this.channelType,t.t0),t.t0;case 19:case"end":return t.stop()}}),t,this,[[6,15]])}))),function(t){return e.apply(this,arguments)})}]),i}(pT);function gT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sr(t);if(e){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}var mT,bT=function(t){br(i,t);var e,n,r,o=gT(i);function i(t,e,n){var r;return vr(this,i),KS(xr(r=o.call(this,"twilsock")),"contextId",Gv.v4()),r.productId=t,r.platform=e,r.twilsock=n,r}return gr(i,[{key:"updateRegistration",value:(r=hr(to.mark((function t(e,n){var r,o;return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.has("messageType")){t.next=2;break}return t.abrupt("return",e);case 2:return r=Array.from(e.messageTypes),o={product_id:this.productId,notification_protocol_version:4,endpoint_platform:this.platform,message_types:r},t.prev=4,t.next=7,this.twilsock.setNotificationsContext(this.contextId,o);case 7:t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(4),uT.error("Failed to update twilsock notification context: ".concat(t.t0)),t.t0;case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(t,e){return r.apply(this,arguments)})},{key:"removeRegistration",value:(n=hr(to.mark((function t(){return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.twilsock.removeNotificationsContext(this.contextId);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),uT.error("Failed to remove twilsock notification context: ".concat(t.t0)),t.t0;case 9:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"sendDeviceRemoveRequest",value:(e=hr(to.mark((function t(e){return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),i}(pT);function wT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sr(t);if(e){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}var xT=yv("apn","fcm","twilsock");return t.Notifications=mT=function(t){br(i,t);var e,n,r,o=wT(i);function i(t){var e,n,r,a,s,c,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vr(this,i),u=o.call(this),f.logLevel=null!==(e=f.logLevel)&&void 0!==e?e:"error",uT.setLevel(f.logLevel);var l=null!==(n=f.productId)&&void 0!==n?n:"notifications",d=!f.twilsockClient,p=f.twilsockClient=null!==(r=f.twilsockClient)&&void 0!==r?r:new el.TwilsockClient(t,l,f),h=null!==(a=f.notifications)&&void 0!==a?a:{},v=null!==(s=null!==(c=h.region)&&void 0!==c?c:f.region)&&void 0!==s?s:"us1",y="https://ers.".concat(v,".twilio.com/v1/registrations"),g=h.ersUrl||y;u.connectors=new Map;var m=mT._detectPlatform();return u.connectors.set("apn",new yT("apn",{protocolVersion:4,productId:l,platform:m},p,g)),u.connectors.set("fcm",new yT("fcm",{protocolVersion:3,productId:l,platform:m},p,g)),u.connectors.set("twilsock",new bT(l,m,p)),p.on("stateChanged",(function(t){return u.emit("transportState",t)})),u._connector("twilsock").on("stateChanged",(function(t,e,n){return u.emit("stateChanged",t,e,n)})),u._connector("apn").on("stateChanged",(function(t,e,n){return u.emit("stateChanged",t,e,n)})),u._connector("fcm").on("stateChanged",(function(t,e,n){return u.emit("stateChanged",t,e,n)})),p.on("message",(function(t,e){return u._routeMessage(t,e)})),u.updateToken(t),d&&(p.connect(),u.twilsock=p),u}return gr(i,[{key:"shutdown",value:(r=hr(to.mark((function t(){return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectors.clear(),!this.twilsock){t.next=4;break}return t.next=4,this.twilsock.disconnect();case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setPushRegistrationId",value:function(t,e){uT.debug("Set ".concat(t," push registration id '").concat(e,"'")),this._connector(t).setNotificationId(e)}},{key:"subscribe",value:function(t,e){uT.debug("Add ".concat(t," subscriptions for message type ").concat(e)),this._connector(t).subscribe(e)}},{key:"unsubscribe",value:function(t,e){uT.debug("Remove ".concat(t," subscriptions for message type ").concat(e)),this._connector(t).unsubscribe(e)}},{key:"updateToken",value:function(t){this.connectors.forEach((function(e){return e.updateToken(t)}))}},{key:"commitChanges",value:(n=hr(to.mark((function t(){var e;return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],this.connectors.forEach((function(t){t.isActive()&&e.push(t.commitChanges())})),t.next=4,Promise.all(e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"removeRegistrations",value:(e=hr(to.mark((function t(e,n){return to.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connector(e).sendDeviceRemoveRequest(n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"handlePushNotification",value:function(t){return{messageType:t.twi_message_type,payload:t.payload}}},{key:"_routeMessage",value:function(t,e){uT.debug("Notification message arrived: ",t,e),this.emit("message",t,e)}},{key:"_connector",value:function(t){var e=this.connectors.get(t);if(!e)throw new Error("Unknown channel type: ".concat(t));return e}}],[{key:"_detectPlatform",value:function(){var t="";return"undefined"!=typeof navigator?(t="unknown",void 0!==navigator.product&&(t=navigator.product),void 0!==navigator.userAgent&&(t=navigator.userAgent)):t="web",t.substring(0,128)}}]),i}($f),Wf([wv(xT,gv),zf("design:type",Function),zf("design:paramtypes",[String,String]),zf("design:returntype",void 0)],t.Notifications.prototype,"setPushRegistrationId",null),Wf([wv(xT,gv),zf("design:type",Function),zf("design:paramtypes",[String,String]),zf("design:returntype",void 0)],t.Notifications.prototype,"subscribe",null),Wf([wv(xT,gv),zf("design:type",Function),zf("design:paramtypes",[String,String]),zf("design:returntype",void 0)],t.Notifications.prototype,"unsubscribe",null),Wf([wv(gv),zf("design:type",Function),zf("design:paramtypes",[String]),zf("design:returntype",void 0)],t.Notifications.prototype,"updateToken",null),Wf([xv(xT,gv),zf("design:type",Function),zf("design:paramtypes",[String,String]),zf("design:returntype",Promise)],t.Notifications.prototype,"removeRegistrations",null),t.Notifications=mT=Wf([bv(gv,[mv,"undefined",yv(null)]),zf("design:paramtypes",[String,Object])],t.Notifications),Object.defineProperty(t,"__esModule",{value:!0}),t}({});
